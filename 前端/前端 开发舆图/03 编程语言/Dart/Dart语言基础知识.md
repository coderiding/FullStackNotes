## DartåŸºç¡€çŸ¥è¯†

### Dartçš„ç¤ºä¾‹

* [Dartçš„ç¤ºä¾‹008-åŠ å·æŒ‰é’®](https://gitee.com/erliucxy/codes/yg3wqdmhaenuj56pbszv139)
* [Dartçš„ç¤ºä¾‹007-æ¼”ç¤ºrunes16BitCodeUnitså’Œ32](https://gitee.com/erliucxy/codes/9plmtnbg1837uzqvdwyc086)
* [Dartçš„ç¤ºä¾‹006-å¡ç‰‡åˆ—è¡¨å¢åŠ åˆ é™¤](https://gitee.com/erliucxy/codes/snal1zb3m46q97twgvrx089)
* [Dartçš„ç¤ºä¾‹005-åˆ†é¡µæŒ‡ç¤ºå™¨](https://gitee.com/erliucxy/codes/fusp3el50mnw4tkgvx91c26)
* [Dartçš„ç¤ºä¾‹004-èœå•](https://gitee.com/erliucxy/codes/7x12f85rw0klhyqusemtz77)
* [Dartçš„ç¤ºä¾‹003-åˆ—è¡¨å±•å¼€](https://gitee.com/erliucxy/codes/vjf7n6pqcgy8szetrambo61)
* [Dartçš„ç¤ºä¾‹002-é¡¶éƒ¨tabbar](https://gitee.com/erliucxy/codes/dzy1h0r2xe5wbpjq6ifso39)
* [Dartçš„ç¤ºä¾‹001-ä¸€ä¸ªwidget](https://gitee.com/erliucxy/codes/d16fgbhj2u4wrplnxak8m63)

### Dartçš„ä¸€ä¸ªé‡è¦çš„ç¨‹åº2019.2.13

* ä¸€ä¸ªæ•°å­—å­—é¢é‡ã€‚æ•°å­—å­—é¢é‡æ˜¯ç¼–è¯‘æ—¶å¸¸é‡
* $variableName (or ${expression})
* å­—ç¬¦ä¸²æ’å€¼ï¼šåœ¨å­—ç¬¦ä¸²å­—é¢é‡ä¸­å¼•ç”¨å˜é‡æˆ–è€…è¡¨è¾¾å¼ã€‚ è¯¦æƒ…è¯·å‚è€ƒï¼š Â Strings ã€‚ 
* main()
* Dart ç¨‹åºæ‰§è¡Œçš„å…¥å£æ–¹æ³•ï¼Œæ¯ä¸ªç¨‹åºéƒ½ Â  éœ€è¦ Â  ä¸€ä¸ªè¿™æ ·çš„æ–¹æ³•ã€‚ è¯¦æƒ…è¯·å‚è€ƒï¼š Â main() æ–¹æ³• ã€‚ 

### Dartçº¿ç¨‹æ¨¡å‹åŠå¼‚å¸¸æ•è·

**Dartå•çº¿ç¨‹æ¨¡å‹**
* Dartå’ŒJavaScriptä¸åŒï¼Œå®ƒä»¬éƒ½æ˜¯å•çº¿ç¨‹æ¨¡å‹
* å¾®ä»»åŠ¡é˜Ÿåˆ—çš„æ‰§è¡Œä¼˜å…ˆçº§é«˜äºäº‹ä»¶é˜Ÿåˆ—
* Dart åœ¨å•çº¿ç¨‹ä¸­æ˜¯ä»¥æ¶ˆæ¯å¾ªç¯æœºåˆ¶æ¥è¿è¡Œçš„ï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸€ä¸ªæ˜¯â€œå¾®ä»»åŠ¡é˜Ÿåˆ—â€ microtask queueï¼Œå¦ä¸€ä¸ªå«åšâ€œäº‹ä»¶é˜Ÿåˆ—â€ event queueã€‚
* ä¸€ä¸ªä»»åŠ¡ä¸­çš„å¼‚å¸¸æ˜¯ä¸ä¼šå½±å“å…¶å®ƒä»»åŠ¡æ‰§è¡Œçš„ã€‚
* å•çº¿ç¨‹å·¥ä½œé¡ºåº
* http://ww1.sinaimg.cn/large/006Akqprgy1g05y886j7bj30d30e2dg8.jpg

---

**å•çº¿ç¨‹å·¥ä½œé¡ºåº**
* Dart åœ¨å•çº¿ç¨‹ä¸­æ˜¯ä»¥æ¶ˆæ¯å¾ªç¯æœºåˆ¶æ¥è¿è¡Œçš„ï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸€ä¸ªæ˜¯ â€œ å¾®ä»»åŠ¡é˜Ÿåˆ— â€Â microtask queue ï¼Œå¦ä¸€ä¸ªå«åš â€œ äº‹ä»¶é˜Ÿåˆ— â€Â event queue ã€‚ä»å›¾ä¸­å¯ä»¥å‘ç°ï¼Œå¾®ä»»åŠ¡é˜Ÿåˆ—çš„æ‰§è¡Œä¼˜å…ˆçº§é«˜äºäº‹ä»¶é˜Ÿåˆ—ã€‚ 
* ç°åœ¨æˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸‹Dart çº¿ç¨‹è¿è¡Œè¿‡ç¨‹ï¼Œå¦‚ä¸Šå›¾ä¸­æ‰€ç¤ºï¼Œå…¥å£å‡½æ•° main() æ‰§è¡Œå®Œåï¼Œæ¶ˆæ¯å¾ªç¯æœºåˆ¶ä¾¿å¯åŠ¨äº†ã€‚é¦–å…ˆä¼šæŒ‰ç…§å…ˆè¿›å…ˆå‡ºçš„é¡ºåºé€ä¸ªæ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œå½“æ‰€æœ‰å¾®ä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œå®Œåä¾¿å¼€å§‹æ‰§è¡Œäº‹ä»¶é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œäº‹ä»¶ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åå†å»æ‰§è¡Œå¾®ä»»åŠ¡ï¼Œå¦‚æ­¤å¾ªç¯å¾€å¤ï¼Œç”Ÿç”Ÿä¸æ¯ã€‚ 
* åœ¨ Dart ä¸­ï¼Œæ‰€æœ‰çš„å¤–éƒ¨äº‹ä»¶ä»»åŠ¡éƒ½åœ¨äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œå¦‚ IO ã€è®¡æ—¶å™¨ã€ç‚¹å‡»ã€ä»¥åŠç»˜åˆ¶äº‹ä»¶ç­‰ï¼Œè€Œå¾®ä»»åŠ¡é€šå¸¸æ¥æºäº Dart å†…éƒ¨ï¼Œå¹¶ä¸”å¾®ä»»åŠ¡éå¸¸å°‘ï¼Œä¹‹æ‰€ä»¥å¦‚æ­¤ï¼Œæ˜¯å› ä¸ºå¾®ä»»åŠ¡é˜Ÿåˆ—ä¼˜å…ˆçº§é«˜ï¼Œå¦‚æœå¾®ä»»åŠ¡å¤ªå¤šï¼Œæ‰§è¡Œæ—¶é—´æ€»å’Œå°±è¶Šä¹…ï¼Œäº‹ä»¶é˜Ÿåˆ—ä»»åŠ¡çš„å»¶è¿Ÿä¹Ÿå°±è¶Šä¹…ï¼Œå¯¹äº GUI åº”ç”¨æ¥è¯´æœ€ç›´è§‚çš„è¡¨ç°å°±æ˜¯æ¯”è¾ƒå¡ï¼Œæ‰€ä»¥å¿…é¡»å¾—ä¿è¯å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸ä¼šå¤ªé•¿ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ Future.microtask(â€¦) æ–¹æ³•å‘å¾®ä»»åŠ¡é˜Ÿåˆ—æ’å…¥ä¸€ä¸ªä»»åŠ¡ã€‚ 
* åœ¨äº‹ä»¶å¾ªç¯ä¸­ï¼Œå½“æŸä¸ªä»»åŠ¡å‘ç”Ÿå¼‚å¸¸å¹¶æ²¡æœ‰è¢«æ•è·æ—¶ï¼Œç¨‹åºå¹¶ä¸ä¼šé€€å‡ºï¼Œè€Œç›´æ¥å¯¼è‡´çš„ç»“æœæ˜¯å½“å‰ä»»åŠ¡ çš„åç»­ä»£ç å°±ä¸ä¼šè¢«æ‰§è¡Œäº†ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªä»»åŠ¡ä¸­çš„å¼‚å¸¸æ˜¯ä¸ä¼šå½±å“å…¶å®ƒä»»åŠ¡æ‰§è¡Œçš„ã€‚ 

### Dartçš„symbols

* ä¸€ä¸ª Â Symbol Â object ä»£è¡¨ Dart ç¨‹åºä¸­å£°æ˜çš„æ“ä½œç¬¦æˆ–è€…æ ‡è¯†ç¬¦ã€‚ ä½ ä¹Ÿè®¸ä»æ¥ä¸ä¼šç”¨åˆ° Symbol ï¼Œä½†æ˜¯è¯¥åŠŸèƒ½å¯¹äºé€šè¿‡åå­—æ¥å¼•ç”¨æ ‡è¯†ç¬¦çš„æƒ…å†µ æ˜¯éå¸¸æœ‰ä»·å€¼çš„ï¼Œç‰¹åˆ«æ˜¯æ··æ·†åçš„ä»£ç ï¼Œ æ ‡è¯†ç¬¦çš„åå­—è¢«æ··æ·†äº†ï¼Œä½†æ˜¯ Symbol çš„åå­—ä¸ä¼šæ”¹å˜ã€‚ 
* Symbol å­—é¢é‡å®šä¹‰æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚ 
* å…³äº symbols çš„è¯¦æƒ…ï¼Œè¯·å‚è€ƒ Â Dart:mirrors - reflection ã€‚ 
* ä½¿ç”¨ Symbol å­—é¢é‡æ¥è·å–æ ‡è¯†ç¬¦çš„ symbol å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯åœ¨æ ‡è¯†ç¬¦ å‰é¢æ·»åŠ ä¸€ä¸ª Â  # Â  ç¬¦å·ï¼š 

```dart
#radix 
#bar 
```

### Dartçš„String

* Stringsï¼ˆå­—ç¬¦ä¸²ï¼‰2019.2.13
* Dart å­—ç¬¦ä¸²æ˜¯ UTF-16 ç¼–ç çš„å­—ç¬¦åºåˆ—ã€‚ å¯ä»¥ä½¿ç”¨å•å¼•å·æˆ–è€…åŒå¼•å·æ¥åˆ›å»ºå­—ç¬¦ä¸²ï¼š 

```dart
var s1 = 'Single quotes work well for string literals.' ; 
var s2 = "Double quotes work just as well." ; 
var s3 = 'It\'s easy to escape the string delimiter.' ; 
var s4 = "It's even easier to use the other delimiter." ;
```

* å¯ä»¥åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨è¡¨è¾¾å¼ï¼Œç”¨æ³•æ˜¯è¿™æ ·çš„ï¼š Â  ${expression } ã€‚å¦‚æœè¡¨è¾¾å¼æ˜¯ä¸€ä¸ªæ¯”èµ›æœï¼Œå¯ä»¥çœç•¥ {} ã€‚ å¦‚æœè¡¨è¾¾å¼çš„ç»“æœä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™ Dart ä¼šè°ƒç”¨å¯¹è±¡çš„ Â  toString() Â  å‡½æ•°æ¥è·å–ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ 

```dart
var s = 'string interpolation' ; 

assert ( 'Dart has $s, which is very handy.' == 
       'Dart has string interpolation, ' + 
       'which is very handy.' ); 
assert ( 'That deserves all caps. ' + 
       '${s.toUpperCase()} is very handy!' == 
       'That deserves all caps. ' + 
       'STRING INTERPOLATION is very handy!' ); 
```

* æ³¨æ„ï¼š Â  == Â  æ“ä½œç¬¦åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹æ˜¯å¦ä¸€æ ·ã€‚ å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²åŒ…å«ä¸€æ ·çš„å­—ç¬¦ç¼–ç åºåˆ—ï¼Œ åˆ™ä»–ä»¬æ˜¯ç›¸ç­‰çš„ã€‚ 

---

**å¯ä»¥åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨è¡¨è¾¾å¼ï¼Œç”¨æ³•æ˜¯è¿™æ ·çš„ï¼š ${expression}**

```dart
var s = 'string interpolation' ; 

assert ( 'Dart has $s, which is very handy.' == 
       'Dart has string interpolation, ' + 
       'which is very handy.' ); 
assert ( 'That deserves all caps. ' + 
       '${s.toUpperCase()} is very handy!' == 
       'That deserves all caps. ' + 
       'STRING INTERPOLATION is very handy!' ); 
```

---

**ä½¿ç”¨ä¸‰ä¸ªå•å¼•å·æˆ–è€…åŒå¼•å·ä¹Ÿå¯ä»¥ åˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²å¯¹è±¡ï¼š**

```dart
var s1 = ''' You can create multi-line strings like this one. ''' ; 
var s2 = """This is also a multi-line string.""" ; 
```

---

**é€šè¿‡æä¾›ä¸€ä¸ª r å‰ç¼€å¯ä»¥åˆ›å»ºä¸€ä¸ª â€œåŸå§‹ rawâ€ å­—ç¬¦ä¸²ï¼š**

```dart
var s = r"In a raw string, even \n isn't special." ; 
```

* å‚è€ƒ Â Runes Â  æ¥äº†è§£å¦‚ä½•åœ¨å­—ç¬¦ä¸² ä¸­è¡¨è¾¾ Unicode å­—ç¬¦ã€‚ 

---

**å­—ç¬¦ä¸²å­—é¢é‡æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼Œ å¸¦æœ‰å­—ç¬¦ä¸²æ’å€¼çš„å­—ç¬¦ä¸²å®šä¹‰ï¼Œè‹¥å¹²æ’å€¼è¡¨è¾¾å¼å¼•ç”¨çš„ä¸ºç¼–è¯‘æ—¶å¸¸é‡åˆ™å…¶ç»“æœä¹Ÿæ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚**

```dart
// These work in a const string. 
const aConstNum = 0 ; 
const aConstBool = true ; 
const aConstString = 'a constant string' ; 

// These do NOT work in a const string. 
var aNum = 0 ; 
var aBool = true ; 
var aString = 'a string' ; 
const aConstList = const [ 1 , 2 , 3 ]; 

const validConstString = '$aConstNum $aConstBool $aConstString' ; 
// const invalidConstString = '$aNum $aBool $aString $aConstList'; 
```

---

**å¯ä»¥ä½¿ç”¨ + æ“ä½œç¬¦æ¥æŠŠå¤šä¸ªå­—ç¬¦ä¸²é“¾æ¥ä¸ºä¸€ä¸ªï¼Œä¹Ÿå¯ä»¥æŠŠå¤šä¸ª å­—ç¬¦ä¸²æ”¾åˆ°ä¸€èµ·æ¥å®ç°åŒæ ·çš„åŠŸèƒ½ï¼š**

```dart
var s1 = 'String ' 'concatenation' 
         " works even over line breaks." ; 
assert (s1 == 'String concatenation works even over ' 
             'line breaks.' ); 

var s2 = 'The + operator ' 
         + 'works, as well.' ; 
assert (s2 == 'The + operator works, as well.' ); 
```

### Dartçš„runesä»£è¡¨å­—ç¬¦ä¸²çš„utf32code

* Unicode ä¸ºæ¯ä¸€ä¸ªå­—ç¬¦ã€æ ‡ç‚¹ç¬¦å·ã€è¡¨æƒ…ç¬¦å·ç­‰éƒ½å®šä¹‰äº† ä¸€ä¸ªå”¯ä¸€çš„æ•°å€¼ã€‚ ç”±äº Dart å­—ç¬¦ä¸²æ˜¯ UTF-16 code units å­—ç¬¦åºåˆ—ï¼Œ æ‰€ä»¥åœ¨å­—ç¬¦ä¸²ä¸­è¡¨è¾¾ 32-bit Unicode å€¼å°±éœ€è¦ æ–°çš„è¯­æ³•äº†ã€‚ 
* é€šå¸¸ä½¿ç”¨ Â  \uXXXX Â  çš„æ–¹å¼æ¥è¡¨ç¤º Unicode code point ï¼Œ è¿™é‡Œçš„ XXXX æ˜¯ 4 ä¸ª 16 è¿›åˆ¶çš„æ•°ã€‚ ä¾‹å¦‚ï¼Œå¿ƒå½¢ç¬¦å· ( â™¥ ) æ˜¯ Â  \u2665 ã€‚ å¯¹äºé 4 ä¸ªæ•°å€¼çš„æƒ…å†µï¼Œ æŠŠç¼–ç å€¼æ”¾åˆ°å¤§æ‹¬å·ä¸­å³å¯ã€‚ ä¾‹å¦‚ï¼Œç¬‘è„¸ emoji ( ğŸ˜† ) æ˜¯ Â  \u{1f600} ã€‚ 

### Dartçš„metadataå…ƒæ•°æ®

* ä½¿ç”¨å…ƒæ•°æ®ç»™ä½ çš„ä»£ç æ·»åŠ å…¶ä»–é¢å¤–ä¿¡æ¯ã€‚ å…ƒæ•°æ®æ³¨è§£æ˜¯ä»¥@å­—ç¬¦å¼€å¤´ï¼Œåé¢æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶å¸¸é‡ ( ä¾‹å¦‚deprecated ) æˆ–è€…è°ƒç”¨ä¸€ä¸ªå¸¸é‡æ„é€ å‡½æ•°ã€‚ 
* æœ‰ä¸‰ä¸ªæ³¨è§£æ‰€æœ‰çš„ Dart ä»£ç éƒ½å¯ä»¥ä½¿ç”¨ï¼š@deprecated ã€@override å’Œ  @proxy ã€‚
* å…³äº Â  @override å’Œ Â  @proxy Â  ç¤ºä¾‹è¯·å‚è€ƒ Â Extending a class ã€‚ 
* ä½¿ç”¨å…ƒæ•°æ®ç»™ä½ çš„ä»£ç æ·»åŠ å…¶ä»–é¢å¤–ä¿¡æ¯ã€‚
* å…ƒæ•°æ®å¯ä»¥åœ¨ library ã€ class ã€ typedef ã€ type parameter ã€ constructor ã€ factory ã€ function ã€ field ã€ parameter ã€æˆ–è€… variable å£°æ˜ä¹‹å‰ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨ import æˆ–è€… export æŒ‡ä»¤ä¹‹å‰ä½¿ç”¨ã€‚ ä½¿ç”¨åå°„å¯ä»¥åœ¨è¿è¡Œæ—¶è·å–å…ƒæ•°æ®ä¿¡æ¯ã€‚
* ä¸‹é¢æ˜¯ä½¿ç”¨@deprecatedçš„ ç¤ºä¾‹ï¼š 

```dart
class Television { 
  /// _Deprecated: Use [turnOn] instead._ 
  @deprecated 
  void activate() { 
    turnOn(); 
  } 

  /// Turns the TV's power on. 
  void turnOn() { 
    print( 'on!' ); 
  } 
} 
```

* ä½ è¿˜å¯ä»¥å®šä¹‰è‡ªå·±çš„å…ƒæ•°æ®æ³¨è§£ã€‚
* ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ªå‚æ•°çš„ @todo æ³¨è§£ï¼š 

```dart
library todo; 

class todo { 
  final String who; 
  final String what; 

  const todo( this .who, this .what); 
} 
```

* ä½¿ç”¨ @todo æ³¨è§£çš„ç¤ºä¾‹ï¼š 

```dart
import 'todo.Dart' ; 

@todo( 'seth' , 'make this do something' ) 
void doSomething() { 
  print( 'do something' ); 
} 
```

### Dartçš„LibrariesAndVisibilityåº“å’Œå¯è§æ€§-æ€ä¹ˆå¯¼å…¥åº“

**Using librariesï¼ˆä½¿ç”¨åº“ï¼‰**

* ä½¿ç”¨importæ¥æŒ‡å®šä¸€ä¸ªåº“å¦‚ä½•ä½¿ç”¨å¦å¤–ä¸€ä¸ªåº“ã€‚
* ä¾‹å¦‚ï¼Œ Dart web åº”ç”¨é€šå¸¸ä½¿ç”¨Dart:htmlåº“ï¼Œç„¶åå¯ä»¥è¿™æ ·å¯¼å…¥åº“ï¼š import 'Dart:html' ; 
* importå¿…é¡»å‚æ•°ä¸ºåº“çš„URIã€‚å¯¹äºå†…ç½®çš„åº“ï¼ŒURI ä½¿ç”¨ç‰¹æ®Šçš„Dart:schemeã€‚å¯¹äºå…¶ä»–çš„åº“ï¼Œä½ å¯ä»¥ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿè·¯å¾„æˆ–è€…package: Â scheme ã€‚package: scheme æŒ‡å®šçš„åº“é€šè¿‡åŒ…ç®¡ç†å™¨æ¥æä¾›ï¼Œ ä¾‹å¦‚ pub å·¥å…·ã€‚ 
* æ³¨æ„ï¼š URIä»£è¡¨ uniform resource identifier ã€‚URLs Â (uniform resource locators) æ˜¯ä¸€ç§å¸¸è§çš„ URI ã€‚ 

```dart
import 'Dart:io' ; 
import 'package:mylib/mylib.Dart' ; 
import 'package:utils/utils.Dart' ; 
```

---

**Specifying a library prefixï¼ˆæŒ‡å®šåº“å‰ç¼€ï¼‰**
* å¦‚æœä½ å¯¼å…¥çš„ä¸¤ä¸ªåº“å…·æœ‰å†²çªçš„æ ‡è¯†ç¬¦ï¼Œ åˆ™ä½ å¯ä»¥ä½¿ç”¨åº“çš„å‰ç¼€æ¥åŒºåˆ†ã€‚
* å¦‚æœä½ å¯¼å…¥çš„ä¸¤ä¸ªåº“å…·æœ‰å†²çªçš„æ ‡è¯†ç¬¦ï¼Œ åˆ™ä½ å¯ä»¥ä½¿ç”¨åº“çš„å‰ç¼€æ¥åŒºåˆ†ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœ library1 å’Œ library2 éƒ½æœ‰ä¸€ä¸ªåå­—ä¸º Element çš„ç±»ï¼Œ ä½ å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š 

```dart
import 'package:lib1/lib1.Dart' ; 
import 'package:lib2/lib2.Dart' as lib2; 
// ... 
Element element1 = new Element ();           // Uses Element from lib1. 
lib2. Element element2 = new lib2. Element (); // Uses Element from lib2. 
```

---

**Importing only part of a libraryï¼ˆå¯¼å…¥åº“çš„ä¸€éƒ¨åˆ†ï¼‰**
* å¦‚æœä½ åªä½¿ç”¨åº“çš„ä¸€éƒ¨åˆ†åŠŸèƒ½ï¼Œåˆ™å¯ä»¥é€‰æ‹©éœ€è¦å¯¼å…¥çš„ å†…å®¹
* å¦‚æœä½ åªä½¿ç”¨åº“çš„ä¸€éƒ¨åˆ†åŠŸèƒ½ï¼Œåˆ™å¯ä»¥é€‰æ‹©éœ€è¦å¯¼å…¥çš„ å†…å®¹ã€‚ä¾‹å¦‚ï¼š 

```dart
// Import only foo. 
import 'package:lib1/lib1.Dart' show foo; 

// Import all names EXCEPT foo. 
import 'package:lib2/lib2.Dart' hide foo; 
```

---

**Lazily loading a libraryï¼ˆå»¶è¿Ÿè½½å…¥åº“ï¼‰**
* Deferred loading Â ( ä¹Ÿç§°ä¹‹ä¸º Â lazy loading ) å¯ä»¥è®©åº”ç”¨åœ¨éœ€è¦çš„æ—¶å€™å†åŠ è½½åº“ã€‚ 
* ä¸‹é¢æ˜¯ä¸€äº›ä½¿ç”¨å»¶è¿ŸåŠ è½½åº“çš„åœºæ™¯ï¼š 
	â€¢	å‡å°‘ APP çš„å¯åŠ¨æ—¶é—´ã€‚ 
	â€¢	æ‰§è¡Œ A/B æµ‹è¯•ï¼Œä¾‹å¦‚ å°è¯•å„ç§ç®—æ³•çš„ ä¸åŒå®ç°ã€‚ 
	â€¢	åŠ è½½å¾ˆå°‘ä½¿ç”¨çš„åŠŸèƒ½ï¼Œä¾‹å¦‚å¯é€‰çš„å±å¹•å’Œå¯¹è¯æ¡†ã€‚ 
* è¦å»¶è¿ŸåŠ è½½ä¸€ä¸ªåº“ï¼Œéœ€è¦å…ˆä½¿ç”¨ deferred as æ¥ å¯¼å…¥ï¼š import 'package:deferred/hello.Dart' deferred as hello; 
* å½“éœ€è¦ä½¿ç”¨çš„æ—¶å€™ï¼Œä½¿ç”¨åº“æ ‡è¯†ç¬¦è°ƒç”¨ Â  loadLibrary() Â  å‡½æ•°æ¥åŠ è½½åº“ï¼š 

```dart
greet() async { 
  await hello.loadLibrary(); 
  hello.printGreeting(); 
} 
```

* åœ¨å‰é¢çš„ä»£ç ï¼Œ ä½¿ç”¨ Â  await Â  å…³é”®å­—æš‚åœä»£ç æ‰§è¡Œä¸€ç›´åˆ°åº“åŠ è½½å®Œæˆã€‚ å…³äº Â  async Â  å’Œ Â  await Â  çš„æ›´å¤šä¿¡æ¯è¯·å‚è€ƒ Â å¼‚æ­¥æ”¯æŒ ã€‚ 
* åœ¨ä¸€ä¸ªåº“ä¸Šä½ å¯ä»¥å¤šæ¬¡è°ƒç”¨ Â  loadLibrary() Â  å‡½æ•°ã€‚ ä½†æ˜¯è¯¥åº“åªæ˜¯è½½å…¥ä¸€æ¬¡ã€‚ 
* ä½¿ç”¨å»¶è¿ŸåŠ è½½åº“çš„æ—¶å€™ï¼Œè¯·æ³¨æ„ä¸€ä¸‹é—®é¢˜ï¼š 
	* å»¶è¿ŸåŠ è½½åº“çš„å¸¸é‡åœ¨å¯¼å…¥çš„æ—¶å€™æ˜¯ä¸å¯ç”¨çš„ã€‚ åªæœ‰å½“åº“åŠ è½½å®Œæ¯•çš„æ—¶å€™ï¼Œåº“ä¸­å¸¸é‡æ‰å¯ä»¥ä½¿ç”¨ã€‚ 
	* åœ¨å¯¼å…¥æ–‡ä»¶çš„æ—¶å€™æ— æ³•ä½¿ç”¨å»¶è¿Ÿåº“ä¸­çš„ç±»å‹ã€‚ å¦‚æœä½ éœ€è¦ä½¿ç”¨ç±»å‹ï¼Œåˆ™è€ƒè™‘æŠŠæ¥å£ç±»å‹ç§»åŠ¨åˆ°å¦å¤–ä¸€ä¸ªåº“ä¸­ï¼Œ è®©ä¸¤ä¸ªåº“éƒ½åˆ†åˆ«å¯¼å…¥è¿™ä¸ªæ¥å£åº“ã€‚ 
	* Dart éšå«çš„æŠŠ Â  loadLibrary() Â  å‡½æ•°å¯¼å…¥åˆ°ä½¿ç”¨ Â  deferred asÂ  çš„å‘½åç©ºé—´ Â  ä¸­ã€‚ Â  loadLibrary() æ–¹æ³•è¿”å›ä¸€ä¸ª Â Future ã€‚ 

---

**Implementing librariesï¼ˆå®ç°åº“ï¼‰**
* å‚è€ƒåˆ›å»ºåº“æ¥äº†è§£å¦‚ä½•åˆ›å»ºä¸€ä¸ªåº“å¹¶å‘å¸ƒã€‚ 

### Dartçš„genericsæ³›å‹

* å¦‚æœä½ æŸ¥çœ‹ List ç±»å‹çš„ API æ–‡æ¡£ï¼Œ åˆ™å¯ä»¥çœ‹åˆ° å®é™…çš„ç±»å‹å®šä¹‰ä¸º List< E >ã€‚ è¿™ä¸ª <â€¦> å£°æ˜ list æ˜¯ä¸€ä¸ª æ³›å‹ (æˆ–è€… å‚æ•°åŒ–) ç±»å‹ã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼Œä½¿ç”¨ä¸€ä¸ªå­—æ¯æ¥ä»£è¡¨ç±»å‹å‚æ•°ï¼Œ ä¾‹å¦‚ E, T, S, K, å’Œ V ç­‰ã€‚
* Why use generics?ï¼ˆä¸ºä½•ä½¿ç”¨æ³›å‹ï¼‰
* åœ¨ Dart ä¸­ç±»å‹æ˜¯å¯é€‰çš„ï¼Œä½ å¯ä»¥é€‰æ‹©ä¸ç”¨æ³›å‹ã€‚ æœ‰äº›æƒ…å†µä¸‹ä½ å¯èƒ½æƒ³ä½¿ç”¨ç±»å‹æ¥è¡¨æ˜ä½ çš„æ„å›¾ï¼Œ ä¸ç®¡æ˜¯ä½¿ç”¨æ³›å‹è¿˜æ˜¯ å…·ä½“ç±»å‹ã€‚ 
* ä¾‹å¦‚ï¼Œå¦‚æœä½ å¸Œæœ›ä¸€ä¸ª list åªåŒ…å«å­—ç¬¦ä¸²å¯¹è±¡ï¼Œä½ å¯ä»¥ å®šä¹‰ä¸º Â  List< String > Â ( ä»£è¡¨ â€œlist of stringâ€) ã€‚è¿™æ ·ä½ ã€ ä½ çš„åŒäº‹ã€ä»¥åŠæ‰€ä½¿ç”¨çš„å·¥å…· ( IDE ä»¥åŠ æ£€æŸ¥æ¨¡å¼çš„ Dart VM ) å¯ä»¥å¸®åŠ©ä½ æ£€æŸ¥ä½ çš„ä»£ç æ˜¯å¦æŠŠéå­—ç¬¦ä¸²ç±»å‹å¯¹è±¡ç»™æ”¾åˆ° è¿™ä¸ª list ä¸­äº†ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š 

```dart
var names = new List < String >(); 
names.addAll([ 'Seth' , 'Kathy' , 'Lars' ]); 
// ... 
names.add( 42 ); // Fails in checked mode (succeeds in production mode). 
```

* ä½¿ç”¨æ³›å‹çš„åŸå› æ˜¯å‡å°‘é‡å¤çš„ä»£ç 
* å¦å¤–ä¸€ä¸ªä½¿ç”¨æ³›å‹çš„åŸå› æ˜¯å‡å°‘é‡å¤çš„ä»£ç ã€‚ æ³›å‹å¯ä»¥åœ¨å¤šç§ç±»å‹ä¹‹é—´å®šä¹‰åŒä¸€ä¸ªå®ç°ï¼Œ åŒæ—¶è¿˜å¯ä»¥ç»§ç»­ä½¿ç”¨æ£€æŸ¥æ¨¡å¼å’Œé™æ€åˆ†æå·¥å…·æä¾›çš„ä»£ç åˆ†æåŠŸèƒ½ã€‚ ä¾‹å¦‚ï¼Œä½ åˆ›å»ºä¸€ä¸ªä¿å­˜ç¼“å­˜å¯¹è±¡ çš„æ¥å£ï¼š 

```dart
abstract class Obj

ectCache { 
  Object getByKey( String key); 
  setByKey( String key, Object value); 
} 
```

* åæ¥ä½ å‘ç°ä½ éœ€è¦ä¸€ä¸ªç”¨æ¥ç¼“å­˜å­—ç¬¦ä¸²çš„å®ç°ï¼Œ åˆ™ä½ åˆå®šä¹‰å¦å¤–ä¸€ä¸ªæ¥å£ï¼š 

```dart
abstract class StringCache { 
  String getByKey( String key); 
  setByKey( String key, String value); 
} 
```

* ç„¶åï¼Œä½ åˆéœ€è¦ä¸€ä¸ªç”¨æ¥ç¼“å­˜æ•°å­—çš„å®ç°ï¼Œ åœ¨åæ¥ï¼Œä½ åˆéœ€è¦å¦å¤–ä¸€ä¸ªç±»å‹çš„ç¼“å­˜å®ç°ï¼Œç­‰ç­‰ã€‚ã€‚ã€‚ 
* æ³›å‹å¯ä»¥é¿å…è¿™ç§é‡å¤çš„ä»£ç ã€‚ ä½ åªéœ€è¦åˆ›å»ºä¸€ä¸ªæ¥å£å³å¯ï¼š 

```dart
abstract class Cache < T > { 
  T getByKey( String key); 
  setByKey( String key, T value); 
} 
```

* åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ T æ˜¯ä¸€ä¸ªå¤‡ç”¨ç±»å‹ã€‚è¿™æ˜¯ä¸€ä¸ªç±»å‹å ä½ç¬¦ï¼Œ åœ¨å¼€å‘è€…è°ƒç”¨è¯¥æ¥å£çš„æ—¶å€™ä¼šæŒ‡å®šå…·ä½“ç±»å‹ã€‚ 

---

**Using collection literalsï¼ˆä½¿ç”¨é›†åˆå­—é¢é‡ï¼‰**
* List å’Œ map å­—é¢é‡ä¹Ÿæ˜¯å¯ä»¥å‚æ•°åŒ–çš„ã€‚ å‚æ•°åŒ–å®šä¹‰ list éœ€è¦åœ¨ä¸­æ‹¬å·ä¹‹å‰ æ·»åŠ  Â  < type > Â  ï¼Œ å®šä¹‰ map éœ€è¦åœ¨å¤§æ‹¬å·ä¹‹å‰ æ·»åŠ  Â  < keyType  ,Â valueType > ã€‚ å¦‚æœä½ éœ€è¦æ›´åŠ å®‰å…¨çš„ç±»å‹æ£€æŸ¥ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ å‚æ•°åŒ–å®šä¹‰ã€‚ä¸‹é¢æ˜¯ä¸€äº›ç¤ºä¾‹ï¼š 
```dart
var names = < String >[ 'Seth' , 'Kathy' , 'Lars' ]; 
var pages = < String , String >{ 
  'index.html' : 'Homepage' , 
  'robots.txt' : 'Hints for web robots' , 
  'humans.txt' : 'We are people, not machines' 
}; 
```

---

**Using parameterized types with constructorsï¼ˆåœ¨æ„é€ å‡½æ•°ä¸­ä½¿ç”¨æ³›å‹ï¼‰**
* åœ¨è°ƒç”¨æ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œ åœ¨ç±»åå­—åé¢ä½¿ç”¨å°–æ‹¬å·(<...>)æ¥æŒ‡å®š æ³›å‹ç±»å‹
* åœ¨è°ƒç”¨æ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œ åœ¨ç±»åå­—åé¢ä½¿ç”¨å°–æ‹¬å· ( <...> ) æ¥æŒ‡å®š æ³›å‹ç±»å‹ã€‚ä¾‹å¦‚ï¼š 

```dart
var names = new List < String >(); 
names.addAll([ 'Seth' , 'Kathy' , 'Lars' ]); 
var nameSet = new Set < String >.from(names); 
```

* ä¸‹é¢ä»£ç åˆ›å»ºäº†ä¸€ä¸ª key ä¸º integer ï¼Œ value ä¸º View ç±»å‹ çš„ map ï¼š 

```dart
var views = new Map < int , View >(); 
```

---

**Generic collections and the types they contain**
* Dart çš„æ³›å‹ç±»å‹æ˜¯å›ºåŒ–çš„ï¼Œåœ¨è¿è¡Œæ—¶æœ‰ä¹Ÿ å¯ä»¥åˆ¤æ–­å…·ä½“çš„ç±»å‹ã€‚ä¾‹å¦‚åœ¨è¿è¡Œæ—¶ï¼ˆç”šè‡³æ˜¯æˆäº§æ¨¡å¼ï¼‰ ä¹Ÿå¯ä»¥æ£€æµ‹é›†åˆé‡Œé¢çš„å¯¹è±¡ç±»å‹ï¼š 

```dart
var names = new List < String >(); 
names.addAll([ 'Seth' , 'Kathy' , 'Lars' ]); 
print(names is List < String >); // true 
```

* æ³¨æ„ Â  is Â  è¡¨è¾¾å¼åªæ˜¯åˆ¤æ–­é›†åˆçš„ç±»å‹ï¼Œè€Œä¸æ˜¯é›†åˆé‡Œé¢å…·ä½“å¯¹è±¡çš„ç±»å‹ã€‚ åœ¨æˆäº§æ¨¡å¼ï¼Œ List< String > å˜é‡å¯ä»¥åŒ…å« éå­—ç¬¦ä¸²ç±»å‹å¯¹è±¡ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œ ä½ å¯ä»¥é€‰æ‹©åˆ†åˆ«åˆ¤æ–­æ¯ä¸ªå¯¹è±¡çš„ç±»å‹æˆ–è€… å¤„ç†ç±»å‹è½¬æ¢å¼‚å¸¸ ( å‚è€ƒ Â Exceptions ) ã€‚ 
* æ³¨æ„ï¼š Â Java ä¸­çš„æ³›å‹ä¿¡æ¯æ˜¯ç¼–è¯‘æ—¶çš„ï¼Œæ³›å‹ä¿¡æ¯åœ¨è¿è¡Œæ—¶æ˜¯ä¸çº¯åœ¨çš„ã€‚ åœ¨ Java ä¸­ä½ å¯ä»¥æµ‹è¯•ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸º List ï¼Œ ä½†æ˜¯ä½ æ— æ³•æµ‹è¯•ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸º Â  List< String > ã€‚ 

---

**Restricting the parameterized typeï¼ˆé™åˆ¶æ³›å‹ç±»å‹ï¼‰**
* å½“ä½¿ç”¨æ³›å‹ç±»å‹çš„æ—¶å€™ï¼Œä½  å¯èƒ½æƒ³é™åˆ¶æ³›å‹çš„å…·ä½“ç±»å‹ã€‚

```dart
// T must be SomeBaseClass or one of its descendants. 
class Foo < T extends SomeBaseClass > {...} 
class Extender extends SomeBaseClass {...} 

void main() { 
  // It's OK to use SomeBaseClass or any of its subclasses inside <>. 
  var someBaseClassFoo = new Foo < SomeBaseClass >(); 
  var extenderFoo = new Foo < Extender >(); 

  // It's also OK to use no <> at all. 
  var foo = new Foo (); 

  // Specifying any non-SomeBaseClass type results in a warning and, in 
  // checked mode, a runtime error. 
  // var objectFoo = new Foo<Object>(); 
} 
```

---

**Using generic methodsï¼ˆä½¿ç”¨æ³›å‹å‡½æ•°ï¼‰**
* ä¸€å¼€å§‹ï¼Œæ³›å‹åªèƒ½åœ¨ Dart ç±»ä¸­ä½¿ç”¨ã€‚ æ–°çš„è¯­æ³•ä¹Ÿæ”¯æŒåœ¨å‡½æ•°å’Œæ–¹æ³•ä¸Šä½¿ç”¨æ³›å‹äº†ã€‚ 

```dart
T first <T> ( List < T > ts) { 
  // ...Do some initial work or error checking, then... 
  T tmp ?= ts[ 0 ]; 
  // ...Do some additional checking or processing... 
  return tmp; 
}
```

* è¿™é‡Œçš„ Â  first Â (  < T > ) æ³›å‹å¯ä»¥åœ¨å¦‚ä¸‹åœ°æ–¹ä½¿ç”¨ å‚æ•° Â  T Â  ï¼š 
	* å‡½æ•°çš„è¿”å›å€¼ç±»å‹ ( T ). 
	* å‚æ•°çš„ç±»å‹ ( List< T > ). 
	* å±€éƒ¨å˜é‡çš„ç±»å‹ ( T tmp ). 
* ç‰ˆæœ¬è¯´æ˜ï¼š Â åœ¨ Dart SDK 1.21. Â  å¼€å§‹å¯ä»¥ä½¿ç”¨æ³›å‹å‡½æ•°ã€‚ 
* å¦‚æœä½ ä½¿ç”¨äº†æ³›å‹å‡½æ•°ï¼Œåˆ™éœ€è¦ Â è®¾ç½® SDK ç‰ˆæœ¬å·ä¸º 1.21 æˆ–è€…æ›´é«˜ç‰ˆæœ¬ã€‚ 
* å…³äºæ³›å‹çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è€ƒ Â Dart çš„å¯é€‰ ç±»å‹ Â  å’Œ Â ä½¿ç”¨æ³›å‹å‡½æ•° ã€‚ 

### Dartçš„Functionsæ–¹æ³•

* Dart æ˜¯ä¸€ä¸ªçœŸæ­£çš„é¢å‘å¯¹è±¡è¯­è¨€ï¼Œæ–¹æ³•ä¹Ÿæ˜¯å¯¹è±¡å¹¶ä¸”å…·æœ‰ä¸€ç§ ç±»å‹ï¼Œ Â Function ã€‚ è¿™æ„å‘³ç€ï¼Œæ–¹æ³•å¯ä»¥èµ‹å€¼ç»™å˜é‡ï¼Œä¹Ÿå¯ä»¥å½“åšå…¶ä»–æ–¹æ³•çš„å‚æ•°ã€‚ ä¹Ÿå¯ä»¥æŠŠ Dart ç±»çš„å®ä¾‹å½“åšæ–¹æ³•æ¥è°ƒç”¨ã€‚ è¯¦æƒ…è¯·å‚è€ƒ Â Callable classes ã€‚ 
* æ–¹æ³•çš„ç¤ºä¾‹ï¼š

```dart
bool isNoble( int atomicNumber) { 
  return _nobleGases[atomicNumber] != null ; 
} 
```

* å¯ä»¥é€‰æ‹©å¿½ç•¥ç±»å‹å®šä¹‰ç¤ºä¾‹

```dart
isNoble(atomicNumber) { 
  return _nobleGases[atomicNumber] != null ; 
} 
```

* åªæœ‰ä¸€ä¸ªè¡¨è¾¾å¼çš„æ–¹æ³•ï¼Œä½ å¯ä»¥é€‰æ‹© ä½¿ç”¨ç¼©å†™è¯­æ³•æ¥å®šä¹‰ï¼š

```dart
bool isNoble( int atomicNumber) => _nobleGases[atomicNumber] != null ; 
```

* => expr è¯­æ³•æ˜¯ { return expr; } å½¢å¼çš„ç¼©å†™
* è¿™ä¸ª Â  =>Â expr Â  è¯­æ³•æ˜¯ Â  { returnÂ expr ; } Â  å½¢å¼çš„ç¼©å†™ã€‚ => Â  å½¢å¼ æœ‰æ—¶å€™ä¹Ÿç§°ä¹‹ä¸º Â  èƒ–ç®­å¤´ Â  è¯­æ³•ã€‚ 
* æ³¨æ„ï¼š Â  åœ¨ç®­å¤´ (=>) å’Œå†’å· (;) ä¹‹é—´åªèƒ½ä½¿ç”¨ä¸€ä¸ª Â  è¡¨è¾¾å¼ Â â€“ ä¸èƒ½ä½¿ç”¨ Â  è¯­å¥ã€‚ ä¾‹å¦‚ï¼šä½ ä¸èƒ½ä½¿ç”¨ Â if statement ï¼Œä½†æ˜¯å¯ä»¥ ä½¿ç”¨æ¡ä»¶è¡¨è¾¾å¼ Â conditional expression ã€‚ 

---

**å‚æ•°ç±»å‹**
* æ–¹æ³•å¯ä»¥æœ‰ä¸¤ç§ç±»å‹çš„å‚æ•°ï¼šå¿…éœ€çš„å’Œå¯é€‰çš„ã€‚ å¿…éœ€çš„å‚æ•°åœ¨å‚æ•°åˆ—è¡¨å‰é¢ï¼Œ åé¢æ˜¯å¯é€‰å‚æ•°ã€‚ 

**Optional parametersï¼ˆå¯é€‰å‚æ•°ï¼‰**
* æ•°å¯ä»¥æ˜¯å‘½åå‚æ•°æˆ–è€…åŸºäºä½ç½®çš„å‚æ•°ï¼Œä½†æ˜¯è¿™ä¸¤ç§å‚æ•°ä¸èƒ½åŒæ—¶å½“åšå¯é€‰å‚æ•°ã€‚ 

**Optional named parametersï¼ˆå¯é€‰å‘½åå‚æ•°ï¼‰**
* è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œä½ å¯ä»¥ä½¿ç”¨è¿™ç§å½¢å¼ Â  paramName :Â value Â  æ¥æŒ‡å®šå‘½åå‚æ•°ã€‚ä¾‹å¦‚ï¼š enableFlags(bold: true , hidden: false ); 
* åœ¨å®šä¹‰æ–¹æ³•çš„æ—¶å€™ï¼Œä½¿ç”¨ Â  {param1 ,Â param2 , â€¦} Â  çš„å½¢å¼æ¥æŒ‡å®šå‘½åå‚æ•°ï¼š 

```dart
/// Sets the [bold] and [hidden] flags to the values 
/// you specify. 
enableFlags({ bool bold, bool hidden}) { 
  // ... 
} 
```

**Optional positional parametersï¼ˆå¯é€‰ä½ç½®å‚æ•°ï¼‰**
* æŠŠä¸€äº›æ–¹æ³•çš„å‚æ•°æ”¾åˆ° Â  [] Â  ä¸­å°±å˜æˆå¯é€‰ ä½ç½®å‚æ•°äº†ï¼š 
```dart
String say( String from, String msg, [ String device]) { 
  var result = '$from says $msg' ; 
  if (device != null ) { 
    result = '$result with a $device' ; 
  } 
  return result; 
} 
```

* ä¸‹é¢æ˜¯ä¸ä½¿ç”¨å¯é€‰å‚æ•°è°ƒç”¨ä¸Šé¢æ–¹æ³• çš„ç¤ºä¾‹ï¼š 
```dart
assert (say( 'Bob' , 'Howdy' ) == 'Bob says Howdy' ); 
```

* ä¸‹é¢æ˜¯ä½¿ç”¨å¯é€‰å‚æ•°è°ƒç”¨ä¸Šé¢æ–¹æ³•çš„ç¤ºä¾‹ï¼š 
```dart
assert (say( 'Bob' , 'Howdy' , 'smoke signal' ) == 
    'Bob says Howdy with a smoke signal' ); 
```

**Default parameter valuesï¼ˆé»˜è®¤å‚æ•°å€¼ï¼‰**
* åœ¨å®šä¹‰æ–¹æ³•çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ Â  = Â  æ¥å®šä¹‰å¯é€‰å‚æ•°çš„é»˜è®¤å€¼ã€‚ é»˜è®¤å€¼åªèƒ½æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚ å¦‚æœæ²¡æœ‰æä¾›é»˜è®¤å€¼ï¼Œåˆ™é»˜è®¤å€¼ä¸º Â  null ã€‚ 
* è®¾ç½®å¯é€‰å‚æ•°é»˜è®¤å€¼çš„ç¤ºä¾‹ï¼š

```dart
/// Sets the [bold] and [hidden] flags to the values you 
/// specify, defaulting to false. 
void enableFlags({ bool bold = false , bool hidden = false }) { 
  // ... 
} 

// bold will be true; hidden will be false. 
enableFlags(bold: true ); 
```

* ç‰ˆæœ¬é—®é¢˜ï¼š Â  å°±ç‰ˆæœ¬ä»£ç å¯èƒ½éœ€è¦ä½¿ç”¨ä¸€ä¸ªå†’å· ( : ) è€Œä¸æ˜¯ Â  = Â  æ¥è®¾ç½®å‚æ•°é»˜è®¤å€¼ã€‚ åŸå› åœ¨äº Dart SDK 1.21 ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œå‘½åå‚æ•°åªæ”¯æŒ Â  : ã€‚ Â  : Â  è®¾ç½®å‘½åé»˜è®¤å‚æ•°å€¼åœ¨ä»¥åç‰ˆæœ¬ä¸­å°†ä¸èƒ½ä½¿ç”¨ï¼Œ æ‰€ä»¥æˆ‘ä»¬æ¨èä½  Â  ä½¿ç”¨ Â  = Â  æ¥è®¾ç½®é»˜è®¤å€¼ï¼Œ å¹¶ Â  æŒ‡å®š Dart SDK ç‰ˆæœ¬ä¸º 1.21 æˆ–è€…æ›´é«˜çš„ç‰ˆæœ¬ã€‚ 
* æ˜¾ç¤ºäº†å¦‚ä½•è®¾ç½®ä½ç½®å‚æ•°çš„é»˜è®¤å€¼ï¼š

```dart
String say( String from, String msg, 
    [ String device = 'carrier pigeon' , String mood]) { 
  var result = '$from says $msg' ; 
  if (device != null ) { 
    result = '$result with a $device' ; 
  } 
  if (mood != null ) { 
    result = '$result (in a $mood mood)' ; 
  } 
  return result; 
} 

assert (say( 'Bob' , 'Howdy' ) == 
    'Bob says Howdy with a carrier pigeon' ); 
```

* ä½¿ç”¨ list æˆ–è€… map ä½œä¸ºé»˜è®¤å€¼
* è¿˜å¯ä»¥ä½¿ç”¨ list æˆ–è€… map ä½œä¸ºé»˜è®¤å€¼ã€‚ ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³• Â  doStuff() ï¼Œ å¹¶åˆ†åˆ«ä¸º Â  list Â  å’Œ Â  gifts Â  å‚æ•°æŒ‡å®šäº† é»˜è®¤å€¼ã€‚ 

```dart
void doStuff( 
    { List < int > list = const [ 1 , 2 , 3 ], 
    Map < String , String > gifts = const { 
      'first' : 'paper' , 
      'second' : 'cotton' , 
      'third' : 'leather' 
    }}) { 
  print( 'list:  $list' ); 
  print( 'gifts: $gifts' ); 
} 
```

---

**The main() functionï¼ˆå…¥å£å‡½æ•°ï¼‰**
* æ¯ä¸ªåº”ç”¨éƒ½éœ€è¦æœ‰ä¸ªé¡¶çº§çš„ Â  main() Â  å…¥å£æ–¹æ³•æ‰èƒ½æ‰§è¡Œã€‚ Â  main() Â  æ–¹æ³•çš„è¿”å›å€¼ä¸º Â  void Â  å¹¶ä¸”æœ‰ä¸ªå¯é€‰çš„ Â  List< String > Â  å‚æ•°ã€‚ 
* ä¸€ä¸ª web åº”ç”¨çš„ main() æ–¹æ³•

```dart
void main() { 
  querySelector( "#sample_text_id" ) 
    ..text = "Click me!" 
    ..onClick.listen(reverseText); 
} 
```

* æ³¨æ„ï¼š Â  å‰é¢ä»£ç ä¸­çš„ Â  .. Â  è¯­æ³•ä¸º Â çº§è”è°ƒç”¨ ï¼ˆ cascade ï¼‰ã€‚ ä½¿ç”¨çº§è”è°ƒç”¨è¯­æ³•ï¼Œ ä½ å¯ä»¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šæ‰§è¡Œå¤šä¸ªæ“ä½œã€‚ 
* ä¸€ä¸ªå‘½ä»¤è¡Œåº”ç”¨çš„ main() æ–¹æ³•ï¼Œå¹¶ä¸”ä½¿ç”¨äº† æ–¹æ³•å‚æ•°ä½œä¸ºè¾“å…¥å‚æ•°ï¼š
* ä¸‹é¢æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œåº”ç”¨çš„ Â  main() Â  æ–¹æ³•ï¼Œå¹¶ä¸”ä½¿ç”¨äº† æ–¹æ³•å‚æ•°ä½œä¸ºè¾“å…¥å‚æ•°ï¼š 

```dart
// Run the app like this: Dart args.Dart 1 test 
void main( List < String > arguments) { 
  print(arguments); 

  assert (arguments.length == 2 ); 
  assert ( int .parse(arguments[ 0 ]) == 1 ); 
  assert (arguments[ 1 ] == 'test' ); 
} 
```

* ä½ å¯ä»¥ä½¿ç”¨ Â args library Â  æ¥ å®šä¹‰å’Œè§£æå‘½ä»¤è¡Œè¾“å…¥çš„å‚æ•°æ•°æ®ã€‚ 

---

**Functions as first-class objectsï¼ˆä¸€ç­‰æ–¹æ³•å¯¹è±¡ï¼‰**
* å¯ä»¥æŠŠæ–¹æ³•å½“åšå‚æ•°è°ƒç”¨å¦å¤–ä¸€ä¸ªæ–¹æ³•ã€‚ä¾‹å¦‚ï¼š 

```dart
printElement(element) { 
  print(element); 
} 

var list = [ 1 , 2 , 3 ]; 

// Pass printElement as a parameter. 
list.forEach(printElement); 
```

* æ–¹æ³•ä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼š 

```dart
var loudify = (msg) => '!!! ${msg.toUpperCase()} !!!' ; 
assert (loudify( 'hello' ) == '!!! HELLO !!!' ); 
```

* ä¸Šé¢çš„æ–¹æ³•ä¸º ä¸‹é¢å³å°†ä»‹ç»çš„åŒ¿åæ–¹æ³•ã€‚ 

---

**Anonymous functionsï¼ˆåŒ¿åæ–¹æ³•ï¼‰**
* å¤§éƒ¨åˆ†æ–¹æ³•éƒ½å¸¦æœ‰åå­—ï¼Œä¾‹å¦‚ Â  main() Â  æˆ–è€… Â  printElement() ã€‚ ä½ æœ‰å¯ä»¥åˆ›å»ºæ²¡æœ‰åå­—çš„æ–¹æ³•ï¼Œç§°ä¹‹ä¸ºåŒ¿åæ–¹æ³•ï¼Œæœ‰æ—¶å€™ä¹Ÿè¢«ç§°ä¸º Â lambda Â  æˆ–è€… Â closure é—­åŒ…ã€‚ ä½ å¯ä»¥æŠŠåŒ¿åæ–¹æ³•èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œ ç„¶åä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œæ¯”å¦‚æ·»åŠ åˆ°é›†åˆæˆ–è€…ä»é›†åˆä¸­åˆ é™¤ã€‚ 
* æ²¡æœ‰åå­—çš„æ–¹æ³•ï¼Œç§°ä¹‹ä¸º åŒ¿åæ–¹æ³•ï¼Œæœ‰æ—¶å€™ä¹Ÿè¢«ç§°ä¸º lambda æˆ–è€… closure é—­åŒ…
* ä¾‹å­ï¼š

```dart
([[Type ]Â param1 [, â€¦]]) {Â  
Â Â codeBlock ;Â  
};Â  
```

* ä¸‹é¢çš„ä»£ç å®šä¹‰äº†ä¸€ä¸ªå‚æ•°ä¸º i Â  ï¼ˆè¯¥å‚æ•°æ²¡æœ‰æŒ‡å®šç±»å‹ï¼‰çš„åŒ¿åå‡½æ•°ã€‚ list ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½ä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°æ¥ æ‰“å°å‡ºæ¥ï¼ŒåŒæ—¶æ¥è®¡ç®—äº†æ¯ä¸ªå…ƒç´ åœ¨ list ä¸­çš„ç´¢å¼•ä½ç½®ã€‚ 

```dart
var list = [ 'apples' , 'oranges' , 'grapes' , 'bananas' , 'plums' ]; 
list.forEach((i) { 
  print(list.indexOf(i).toString() + ': ' + i); 
}); 
```

* å¦‚æœæ–¹æ³•åªåŒ…å«ä¸€ä¸ªè¯­å¥ï¼Œå¯ä»¥ä½¿ç”¨èƒ–ç®­å¤´è¯­æ³•ç¼©å†™ã€‚
* å¦‚æœæ–¹æ³•åªåŒ…å«ä¸€ä¸ªè¯­å¥ï¼Œå¯ä»¥ä½¿ç”¨èƒ–ç®­å¤´è¯­æ³•ç¼©å†™ã€‚ æŠŠä¸‹é¢çš„ä»£ç ç²˜è´´åˆ° DartPad ä¸­è¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°ç»“æœæ˜¯ä¸€æ ·çš„ã€‚ 

```dart
list.forEach((i) => print(list.indexOf(i).toString() + ': ' + i)); 
```

---

**Lexical scopeï¼ˆé™æ€ä½œç”¨åŸŸï¼‰**
* å’Œ Java ä½œç”¨åŸŸ ç±»ä¼¼ã€‚
* Dart æ˜¯é™æ€ä½œç”¨åŸŸè¯­è¨€ï¼Œå˜é‡çš„ä½œç”¨åŸŸåœ¨å†™ä»£ç çš„æ—¶å€™å°±ç¡®å®šè¿‡äº†ã€‚ åŸºæœ¬ä¸Šå¤§æ‹¬å·é‡Œé¢å®šä¹‰çš„å˜é‡å°± åªèƒ½åœ¨å¤§æ‹¬å·é‡Œé¢è®¿é—®ï¼Œå’Œ Java ä½œç”¨åŸŸ ç±»ä¼¼ã€‚ 
* ä½œç”¨åŸŸçš„ä¸€ä¸ª ç¤ºä¾‹ï¼š

```dart
var topLevel = true ; 

main() { 
  var insideMain = true ; 

  myFunction() { 
    var insideFunction = true ; 

    nestedFunction() { 
      var insideNestedFunction = true ; 
    
      assert (topLevel); 
      assert (insideMain); 
      assert (insideFunction); 
      assert (insideNestedFunction); 
    } 
  } 
} 
```

* æ³¨æ„ Â  nestedFunction() Â  å¯ä»¥è®¿é—®æ‰€æœ‰çš„å˜é‡ï¼Œ åŒ…å«é¡¶çº§å˜é‡ã€‚ 

---

**Lexical closuresï¼ˆè¯æ³•é—­åŒ…ï¼‰**
* ä¸€ä¸ª Â  é—­åŒ… Â  æ˜¯ä¸€ä¸ªæ–¹æ³•å¯¹è±¡ï¼Œä¸ç®¡è¯¥å¯¹è±¡åœ¨ä½•å¤„è¢«è°ƒç”¨ï¼Œ è¯¥å¯¹è±¡éƒ½å¯ä»¥è®¿é—®å…¶ä½œç”¨åŸŸå†… çš„å˜é‡ã€‚ 
* æ–¹æ³•å¯ä»¥å°é—­å®šä¹‰åˆ°å…¶ä½œç”¨åŸŸå†…çš„å˜é‡ã€‚ ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œ makeAdder() Â  æ•è·åˆ°äº†å˜é‡ Â  addBy ã€‚ ä¸ç®¡ä½ åœ¨é‚£é‡Œæ‰§è¡Œ Â  makeAdder() Â  æ‰€è¿”å›çš„å‡½æ•°ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ Â  addBy Â  å‚æ•°ã€‚ 

```dart
/// Returns a function that adds [addBy] to the 
/// function's argument. 
Function makeAdder( num addBy) { 
  return ( num i) => addBy + i; 
} 

main() { 
  // Create a function that adds 2. 
  var add2 = makeAdder( 2 ); 

  // Create a function that adds 4. 
  var add4 = makeAdder( 4 ); 

  assert (add2( 3 ) == 5 ); 
  assert (add4( 3 ) == 7 ); 
} 
```

* Testing functions for equalityï¼ˆæµ‹è¯•å‡½æ•°æ˜¯å¦ç›¸ç­‰ï¼‰
* ä¸‹é¢æ˜¯æµ‹è¯•é¡¶çº§æ–¹æ³•ã€é™æ€å‡½æ•°å’Œå®ä¾‹å‡½æ•° ç›¸ç­‰çš„ç¤ºä¾‹

```dart
foo() {}               // A top-level function 

class A { 
  static void bar() {} // A static method 
  void baz() {}        // An instance method 
} 

main() { 
  var x; 

  // Comparing top-level functions. 
  x = foo; 
  assert (foo == x); 

  // Comparing static methods. 
  x = A .bar; 
  assert ( A .bar == x); 

  // Comparing instance methods. 
  var v = new A (); // Instance #1 of A 
  var w = new A (); // Instance #2 of A 
  var y = w; 
  x = w.baz; 

  // These closures refer to the same instance (#2), 
  // so they're equal. 
  assert (y.baz == x); 

  // These closures refer to different instances, 
  // so they're unequal. 
  assert (v.baz != w.baz); 
} 
```

---

**Return valuesï¼ˆè¿”å›å€¼ï¼‰**
* æ‰€æœ‰çš„å‡½æ•°éƒ½è¿”å›ä¸€ä¸ªå€¼ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šè¿”å›å€¼ï¼Œåˆ™ é»˜è®¤æŠŠè¯­å¥ Â  return null; Â  ä½œä¸ºå‡½æ•°çš„æœ€åä¸€ä¸ªè¯­å¥æ‰§è¡Œã€‚ 

### Dartçš„Exceptionså¼‚å¸¸

* ä»£ç ä¸­å¯ä»¥å‡ºç°å¼‚å¸¸å’Œæ•è·å¼‚å¸¸ã€‚å¼‚å¸¸è¡¨ç¤ºä¸€äº› æœªçŸ¥çš„é”™è¯¯æƒ…å†µã€‚å¦‚æœå¼‚å¸¸æ²¡æœ‰æ•è·ï¼Œ åˆ™å¼‚å¸¸ä¼šæŠ›å‡ºï¼Œå¯¼è‡´ æŠ›å‡ºå¼‚å¸¸çš„ä»£ç ç»ˆæ­¢æ‰§è¡Œã€‚ 
* å’Œ Java ä¸åŒçš„æ˜¯ï¼Œæ‰€æœ‰çš„ Dart å¼‚å¸¸æ˜¯éæ£€æŸ¥å¼‚å¸¸ã€‚ æ–¹æ³•ä¸ä¸€å®šå£°æ˜äº†ä»–ä»¬æ‰€æŠ›å‡ºçš„å¼‚å¸¸ï¼Œ å¹¶ä¸”ä½ ä¸è¦æ±‚æ•è·ä»»ä½•å¼‚å¸¸ã€‚ 
* Dart æä¾›äº†Exceptionå’ŒErrorç±»å‹ï¼Œ ä»¥åŠä¸€äº›å­ç±»å‹ã€‚ä½ è¿˜ å¯ä»¥å®šä¹‰è‡ªå·±çš„å¼‚å¸¸ç±»å‹ã€‚ä½†æ˜¯ï¼Œ Dart ä»£ç å¯ä»¥ æŠ›å‡ºä»»ä½•é null å¯¹è±¡ä¸ºå¼‚å¸¸ï¼Œä¸ä»…ä»…æ˜¯å®ç°äº† Exception æˆ–è€… Error çš„å¯¹è±¡ã€‚ 
* æ•è·å¼‚å¸¸å¯ä»¥é¿å…å¼‚å¸¸ç»§ç»­ä¼ é€’ï¼ˆä½ é‡æ–°æŠ›å‡º rethrow å¼‚å¸¸é™¤å¤–ï¼‰ã€‚ æ•è·å¼‚å¸¸ç»™ä½ ä¸€ä¸ªå¤„ç† è¯¥å¼‚å¸¸çš„æœºä¼šï¼š

```dart
try { 
  breedMoreLlamas(); 
} on OutOfLlamasException { 
  buyMoreLlamas(); 
}
```

* å¯¹äºå¯ä»¥æŠ›å‡ºå¤šç§ç±»å‹å¼‚å¸¸çš„ä»£ç ï¼Œä½ å¯ä»¥æŒ‡å®š å¤šä¸ªæ•è·è¯­å¥ã€‚æ¯ä¸ªè¯­å¥åˆ†åˆ«å¯¹åº”ä¸€ä¸ªå¼‚å¸¸ç±»å‹ï¼Œ å¦‚æœæ•è·è¯­å¥æ²¡æœ‰æŒ‡å®šå¼‚å¸¸ç±»å‹ï¼Œåˆ™ è¯¥å¯ä»¥æ•è·ä»»ä½•å¼‚å¸¸ç±»å‹ï¼š 

```dart
try { 
  breedMoreLlamas(); 
} on OutOfLlamasException { 
  // A specific exception 
  buyMoreLlamas(); 
} on Exception catch (e) { 
  // Anything else that is an exception 
  print( 'Unknown exception: $e' ); 
} catch (e) { 
  // No specified type, handles all 
  print( 'Something really unknown: $e' ); 
} 
```

* å¦‚ä¹‹å‰ä»£ç æ‰€ç¤ºï¼Œä½ å¯ä»¥ä½¿ç”¨ on Â  æˆ–è€… Â  catch Â  æ¥å£°æ˜æ•è·è¯­å¥ï¼Œä¹Ÿå¯ä»¥ åŒæ—¶ä½¿ç”¨ã€‚ä½¿ç”¨ Â  on Â  æ¥æŒ‡å®šå¼‚å¸¸ç±»å‹ï¼Œä½¿ç”¨ Â  catch Â  æ¥ æ•è·å¼‚å¸¸å¯¹è±¡ã€‚ 
* å‡½æ•° Â  catch() Â  å¯ä»¥å¸¦æœ‰ä¸€ä¸ªæˆ–è€…ä¸¤ä¸ªå‚æ•°ï¼Œ ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæŠ›å‡ºçš„å¼‚å¸¸å¯¹è±¡ï¼Œ ç¬¬äºŒä¸ªä¸ºå †æ ˆä¿¡æ¯ ( ä¸€ä¸ª Â StackTrace Â  å¯¹è±¡ ) ã€‚ 

```dart
} on Exception catch (e) { 
  print( 'Exception details:\n $e' ); 
} catch (e, s) { 
  print( 'Exception details:\n $e' ); 
  print( 'Stack trace:\n $s' ); 
} 
```

* ä½¿ç”¨ Â  rethrow Â  å…³é”®å­—å¯ä»¥ æŠŠæ•è·çš„å¼‚å¸¸ç»™ é‡æ–°æŠ›å‡ºã€‚ 

```dart
final foo = '' ; 

void misbehave() { 
  try { 
    foo = "You can't change a final variable's value." ; 
  } catch (e) { 
    print( 'misbehave() partially handled ${e.runtimeType}.' ); 
    rethrow; // Allow callers to see the exception. 
  } 
} 

void main() { 
  try { 
    misbehave(); 
  } catch (e) { 
    print( 'main() finished handling ${e.runtimeType}.' ); 
  } 
} 
```

---

**ThrowæŠ›å‡º**
* ä¸‹é¢æ˜¯æŠ›å‡ºæˆ–è€… Â  æ‰”å‡ºä¸€ä¸ªå¼‚å¸¸çš„ç¤ºä¾‹ï¼š throw new FormatException ( 'Expected at least 1 section' ); 
* è¿˜å¯ä»¥æŠ›å‡ºä»»æ„çš„å¯¹è±¡ï¼š throw 'Out of llamas!' ; 
* ç”±äºæŠ›å‡ºå¼‚å¸¸æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ => è¯­å¥ä¸­ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨å…¶ä»–èƒ½ä½¿ç”¨è¡¨è¾¾å¼çš„åœ°æ–¹æŠ›å‡ºå¼‚å¸¸ã€‚

```dart
distanceTo( Point other) => 
    throw new UnimplementedError (); 
```

* æŠ›å‡ºä»»æ„çš„å¯¹è±¡ï¼š
* è¿˜å¯ä»¥æŠ›å‡ºä»»æ„çš„å¯¹è±¡ï¼š throw 'Out of llamas!' ; 
* ä¸‹é¢æ˜¯æŠ›å‡ºæˆ–è€… Â  æ‰”å‡ºä¸€ä¸ªå¼‚å¸¸çš„ç¤ºä¾‹ï¼š 

```dart
throw new FormatException ( 'Expected at least 1 section' ); 
```

----

**Catchæ•è·**
* æ•è·å¼‚å¸¸ç»™ä½ ä¸€ä¸ªå¤„ç† è¯¥å¼‚å¸¸çš„æœºä¼šï¼š
* å¯ä»¥ä½¿ç”¨on æˆ–è€… catch æ¥å£°æ˜æ•è·è¯­å¥ï¼Œä¹Ÿå¯ä»¥ åŒæ—¶ä½¿ç”¨
* ä½¿ç”¨ on æ¥æŒ‡å®šå¼‚å¸¸ç±»å‹ï¼Œä½¿ç”¨ catch æ¥ æ•è·å¼‚å¸¸å¯¹è±¡ã€‚
* ä½¿ç”¨ rethrow å…³é”®å­—å¯ä»¥ æŠŠæ•è·çš„å¼‚å¸¸ç»™ é‡æ–°æŠ›å‡ºã€‚
  
```dart  
final foo = '' ; 

void misbehave() { 
  try { 
    foo = "You can't change a final variable's value." ; 
  } catch (e) { 
    print( 'misbehave() partially handled ${e.runtimeType}.' ); 
    rethrow; // Allow callers to see the exception. 
  } 
} 

void main() { 
  try { 
    misbehave(); 
  } catch (e) { 
    print( 'main() finished handling ${e.runtimeType}.' ); 
  } 
} 
```

* å‡½æ•° catch() å¯ä»¥å¸¦æœ‰ä¸€ä¸ªæˆ–è€…ä¸¤ä¸ªå‚æ•°ï¼Œ ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæŠ›å‡ºçš„å¼‚å¸¸å¯¹è±¡ï¼Œ ç¬¬äºŒä¸ªä¸ºå †æ ˆä¿¡æ¯ (ä¸€ä¸ª StackTrace å¯¹è±¡)ã€‚

```dart
  ... 
} on Exception catch (e) { 
  print( 'Exception details:\n $e' ); 
} catch (e, s) { 
  print( 'Exception details:\n $e' ); 
  print( 'Stack trace:\n $s' ); 
} 
```

* å¯¹äºå¯ä»¥æŠ›å‡ºå¤šç§ç±»å‹å¼‚å¸¸çš„ä»£ç ï¼Œä½ å¯ä»¥æŒ‡å®š å¤šä¸ªæ•è·è¯­å¥ã€‚æ¯ä¸ªè¯­å¥åˆ†åˆ«å¯¹åº”ä¸€ä¸ªå¼‚å¸¸ç±»å‹ï¼Œ å¦‚æœæ•è·è¯­å¥æ²¡æœ‰æŒ‡å®šå¼‚å¸¸ç±»å‹ï¼Œåˆ™ è¯¥å¯ä»¥æ•è·ä»»ä½•å¼‚å¸¸ç±»å‹ï¼š

```dart
try { 
  breedMoreLlamas(); 
} on OutOfLlamasException { 
  // A specific exception 
  buyMoreLlamas(); 
} on Exception catch (e) { 
  // Anything else that is an exception 
  print( 'Unknown exception: $e' ); 
} catch (e) { 
  // No specified type, handles all 
  print( 'Something really unknown: $e' ); 
} 
```

**Finally**
* è¦ç¡®ä¿æŸäº›ä»£ç æ‰§è¡Œï¼Œä¸ç®¡æœ‰æ²¡æœ‰å‡ºç°å¼‚å¸¸éƒ½éœ€è¦æ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨ ä¸€ä¸ªÂ finallyÂ è¯­å¥æ¥å®ç°ã€‚
* è¦ç¡®ä¿æŸäº›ä»£ç æ‰§è¡Œï¼Œä¸ç®¡æœ‰æ²¡æœ‰å‡ºç°å¼‚å¸¸éƒ½éœ€è¦æ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨ ä¸€ä¸ª Â  finally Â  è¯­å¥æ¥å®ç°ã€‚å¦‚æœæ²¡æœ‰ Â  catch Â  è¯­å¥æ¥æ•è·å¼‚å¸¸ï¼Œ åˆ™åœ¨æ‰§è¡Œå®Œ Â  finally Â  è¯­å¥åï¼Œ å¼‚å¸¸è¢«æŠ›å‡ºäº†ï¼š 

```dart
try { 
  breedMoreLlamas(); 
} finally { 
  // Always clean up, even if an exception is thrown. 
  cleanLlamaStalls(); 
} 
```

* å®šä¹‰çš„ Â  finally Â  è¯­å¥åœ¨ä»»ä½•åŒ¹é…çš„ Â  catch Â  è¯­å¥ä¹‹åæ‰§è¡Œï¼š 

```dart
try { 
  breedMoreLlamas(); 
} catch (e) { 
  print( 'Error: $e' );  // Handle the exception first. 
} finally { 
  cleanLlamaStalls();  // Then clean up. 
} 
```

* è¯¦æƒ…è¯·å‚è€ƒ Â Exceptions Â  éƒ¨åˆ†ã€‚ 

### [Dartçš„Classes](http://Dart.goodev.org/guides/language/language-tour#a-basic-Dart-program%E4%B8%80%E4%B8%AA%E6%9C%80%E5%9F%BA%E6%9C%AC%E7%9A%84-Dart-%E7%A8%8B%E5%BA%8F)

* ä½¿ç”¨ ?. æ¥æ›¿ä»£ . å¯ä»¥é¿å…å½“å·¦è¾¹å¯¹è±¡ä¸º null æ—¶å€™ æŠ›å‡ºå¼‚å¸¸ï¼š
* ä½¿ç”¨ Â  ?. Â  æ¥æ›¿ä»£ Â  . Â  å¯ä»¥é¿å…å½“å·¦è¾¹å¯¹è±¡ä¸º null æ—¶å€™ æŠ›å‡ºå¼‚å¸¸ï¼š

```dart
// If p is non-null, set its y value to 4. 
p?.y = 4 ; 
```

---

**Instance variables**
* æ‰€æœ‰æ²¡æœ‰åˆå§‹åŒ–çš„å˜é‡å€¼éƒ½æ˜¯ Â  null ã€‚ 
* æ¯ä¸ªå®ä¾‹å˜é‡éƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª Â getter Â  æ–¹æ³•ï¼ˆéšå«çš„ï¼‰ã€‚ Non-final å®ä¾‹å˜é‡è¿˜ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª Â setter æ–¹æ³•ã€‚è¯¦æƒ…ï¼Œ å‚è€ƒ Â Getters and setters ã€‚ 

```dart
class Point { 
  num x; 
  num y; 
} 

main() { 
  var point = new Point (); 
  point.x = 4 ;          // Use the setter method for x. 
  assert (point.x == 4 ); // Use the getter method for x. 
  assert (point.y == null ); // Values default to null. 
}
```

* å¦‚æœä½ åœ¨å®ä¾‹å˜é‡å®šä¹‰çš„æ—¶å€™åˆå§‹åŒ–è¯¥å˜é‡ï¼ˆä¸æ˜¯ åœ¨æ„é€ å‡½æ•°æˆ–è€…å…¶ä»–æ–¹æ³•ä¸­åˆå§‹åŒ–ï¼‰ï¼Œæ”¹å€¼æ˜¯åœ¨å®ä¾‹åˆ›å»ºçš„æ—¶å€™ åˆå§‹åŒ–çš„ï¼Œä¹Ÿå°±æ˜¯åœ¨æ„é€ å‡½æ•°å’Œåˆå§‹åŒ–å‚æ•°åˆ— è¡¨æ‰§è¡Œä¹‹å‰ã€‚ 
* ä¸‹é¢æ˜¯å¦‚ä½•å®šä¹‰å®ä¾‹å˜é‡çš„ç¤ºä¾‹ï¼š

```dart
class Point { 
  num x; // Declare instance variable x, initially null. 
  num y; // Declare y, initially null. 
  num z = 0 ; // Declare z, initially 0. 
} 
```

---

**Constructors**
* å¸¸è§çš„æ„é€ å‡½æ•°ç”Ÿæˆä¸€ä¸ª å¯¹è±¡çš„æ–°å®ä¾‹ï¼š
* å®šä¹‰ä¸€ä¸ªå’Œç±»åå­—ä¸€æ ·çš„æ–¹æ³•å°±å®šä¹‰äº†ä¸€ä¸ªæ„é€ å‡½æ•° è¿˜å¯ä»¥å¸¦æœ‰å…¶ä»–å¯é€‰çš„æ ‡è¯†ç¬¦ï¼Œè¯¦æƒ…å‚è€ƒ Â Named constructors ) ï¼ˆå‘½åæ„é€ å‡½æ•°ï¼‰ã€‚ å¸¸è§çš„æ„é€ å‡½æ•°ç”Ÿæˆä¸€ä¸ª å¯¹è±¡çš„æ–°å®ä¾‹ï¼š 

```dart
class Point { 
  num x; 
  num y; 

  Point ( num x, num y) { 
    // There's a better way to do this, stay tuned. 
    this .x = x; 
    this .y = y; 
  } 
} 
```

* this Â  å…³é”®å­—æŒ‡å½“å‰çš„å®ä¾‹ã€‚ 
* æ³¨æ„ï¼š Â  åªæœ‰å½“åå­—å†²çªçš„æ—¶å€™æ‰ä½¿ç”¨ Â  this ã€‚å¦åˆ™çš„è¯ï¼Œ Dart ä»£ç é£æ ¼æ ·å¼æ¨èå¿½ç•¥ Â  this ã€‚ 
* ç”±äºæŠŠæ„é€ å‡½æ•°å‚æ•°èµ‹å€¼ç»™å®ä¾‹å˜é‡çš„åœºæ™¯å¤ªå¸¸è§äº†ï¼Œ Dart æä¾›äº†ä¸€ä¸ªè¯­æ³•ç³–æ¥ç®€åŒ–è¿™ä¸ªæ“ä½œï¼š 

```dart
class Point { 
  num x; 
  num y; 

  // Syntactic sugar for setting x and y 
  // before the constructor body runs. 
  Point ( this .x, this .y); 
} 
```

**Default constructorsï¼ˆé»˜è®¤æ„é€ å‡½æ•°ï¼‰**
* å¦‚æœä½ æ²¡æœ‰å®šä¹‰æ„é€ å‡½æ•°ï¼Œåˆ™ä¼šæœ‰ä¸ªé»˜è®¤æ„é€ å‡½æ•°ã€‚ é»˜è®¤æ„é€ å‡½æ•°æ²¡æœ‰å‚æ•°ï¼Œå¹¶ä¸”ä¼šè°ƒç”¨è¶…ç±»çš„ æ²¡æœ‰å‚æ•°çš„æ„é€ å‡½æ•°ã€‚ 

**Constructors arenâ€™t inheritedï¼ˆæ„é€ å‡½æ•°ä¸ä¼šç»§æ‰¿ï¼‰**
* å­ç±»ä¸ä¼šç»§æ‰¿è¶…ç±»çš„æ„é€ å‡½æ•°ã€‚ å­ç±»å¦‚æœæ²¡æœ‰å®šä¹‰æ„é€ å‡½æ•°ï¼Œåˆ™åªæœ‰ä¸€ä¸ªé»˜è®¤æ„é€ å‡½æ•° ï¼ˆæ²¡æœ‰åå­—æ²¡æœ‰å‚æ•°ï¼‰ã€‚ 

**Named constructorsï¼ˆå‘½åæ„é€ å‡½æ•°ï¼‰**
* ä½¿ç”¨å‘½åæ„é€ å‡½æ•°å¯ä»¥ä¸ºä¸€ä¸ªç±»å®ç°å¤šä¸ªæ„é€ å‡½æ•°ï¼Œ æˆ–è€…ä½¿ç”¨å‘½åæ„é€ å‡½æ•°æ¥æ›´æ¸…æ™°çš„è¡¨æ˜ä½ çš„æ„å›¾ï¼š 

```dart
class Point { 
  num x; 
  num y; 

  Point ( this .x, this .y); 

  // Named constructor 
  Point .fromJson( Map json) { 
    x = json[ 'x' ]; 
    y = json[ 'y' ]; 
  } 
}
```

* æ³¨æ„ï¼šæ„é€ å‡½æ•°ä¸èƒ½ç»§æ‰¿ï¼Œæ‰€ä»¥è¶…ç±»çš„å‘½åæ„é€ å‡½æ•° ä¹Ÿä¸ä¼šè¢«ç»§æ‰¿ã€‚å¦‚æœä½ å¸Œæœ› å­ç±»ä¹Ÿæœ‰è¶…ç±»ä¸€æ ·çš„å‘½åæ„é€ å‡½æ•°ï¼Œ ä½ å¿…é¡»åœ¨å­ç±»ä¸­è‡ªå·±å®ç°è¯¥æ„é€ å‡½æ•°ã€‚ 

**Invoking a non-default superclass constructorï¼ˆè°ƒç”¨è¶…ç±»æ„é€ å‡½æ•°ï¼‰**
* é»˜è®¤æƒ…å†µä¸‹ï¼Œå­ç±»çš„æ„é€ å‡½æ•°ä¼šè‡ªåŠ¨è°ƒç”¨è¶…ç±»çš„ æ— åæ— å‚æ•°çš„é»˜è®¤æ„é€ å‡½æ•°ã€‚ è¶…ç±»çš„æ„é€ å‡½æ•°åœ¨å­ç±»æ„é€ å‡½æ•°ä½“å¼€å§‹æ‰§è¡Œçš„ä½ç½®è°ƒç”¨ã€‚ å¦‚æœæä¾›äº†ä¸€ä¸ª Â initializer list ï¼ˆåˆå§‹åŒ–å‚æ•°åˆ—è¡¨ï¼‰ ï¼Œåˆ™åˆå§‹åŒ–å‚æ•°åˆ—è¡¨åœ¨è¶…ç±»æ„é€ å‡½æ•°æ‰§è¡Œä¹‹å‰æ‰§è¡Œã€‚ ä¸‹é¢æ˜¯æ„é€ å‡½æ•°æ‰§è¡Œé¡ºåºï¼š 
	* initializer list ï¼ˆåˆå§‹åŒ–å‚æ•°åˆ—è¡¨ï¼‰ 
	* superclassâ€™s no-arg constructor ï¼ˆè¶…ç±»çš„æ— åæ„é€ å‡½æ•°ï¼‰ 
	* main classâ€™s no-arg constructor ï¼ˆä¸»ç±»çš„æ— åæ„é€ å‡½æ•°ï¼‰ 
* å¦‚æœè¶…ç±»æ²¡æœ‰æ— åæ— å‚æ•°æ„é€ å‡½æ•°ï¼Œ åˆ™ä½ éœ€è¦æ‰‹å·¥çš„è°ƒç”¨è¶…ç±»çš„å…¶ä»–æ„é€ å‡½æ•°ã€‚ åœ¨æ„é€ å‡½æ•°å‚æ•°åä½¿ç”¨å†’å· ( : ) å¯ä»¥è°ƒç”¨ è¶…ç±»æ„é€ å‡½æ•°ã€‚ 
* ç”±äºè¶…ç±»æ„é€ å‡½æ•°çš„å‚æ•°åœ¨æ„é€ å‡½æ•°æ‰§è¡Œä¹‹å‰æ‰§è¡Œï¼Œæ‰€ä»¥ å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼æˆ–è€… ä¸€ä¸ªæ–¹æ³•è°ƒç”¨ï¼š 

```dart
class Employee extends Person { 
  // ... 
  Employee () : super .fromJson(findDefaultData()); 
} 
```

* æ³¨æ„ï¼š Â  å¦‚æœåœ¨æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨ä¸­ä½¿ç”¨ Â  super() ï¼Œéœ€è¦æŠŠå®ƒæ”¾åˆ°æœ€åã€‚ è¯¦æƒ…å‚è€ƒ Â Dart æœ€ä½³å®è·µ ã€‚ 
* è­¦å‘Šï¼š Â  è°ƒç”¨è¶…ç±»æ„é€ å‡½æ•°çš„å‚æ•°æ— æ³•è®¿é—® Â  this ã€‚ ä¾‹å¦‚ï¼Œå‚æ•°å¯ä»¥ä¸ºé™æ€å‡½æ•°ä½†æ˜¯ä¸èƒ½æ˜¯å®ä¾‹å‡½æ•°ã€‚ 

---

**Initializer listï¼ˆåˆå§‹åŒ–åˆ—è¡¨ï¼‰**
* åœ¨æ„é€ å‡½æ•°ä½“æ‰§è¡Œä¹‹å‰é™¤äº†å¯ä»¥è°ƒç”¨è¶…ç±»æ„é€ å‡½æ•°ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ åˆå§‹åŒ–å®ä¾‹å‚æ•°ã€‚ ä½¿ç”¨é€—å·åˆ†éš”åˆå§‹åŒ–è¡¨è¾¾å¼ã€‚ 

```dart
class Point { 
  num x; 
  num y; 

  Point ( this .x, this .y); 

  // Initializer list sets instance variables before 
  // the constructor body runs. 
  Point .fromJson( Map jsonMap) 
      : x = jsonMap[ 'x' ], 
        y = jsonMap[ 'y' ] { 
    print( 'In Point.fromJson(): ($x, $y)' ); 
  } 
} 
```

* è­¦å‘Šï¼š Â  åˆå§‹åŒ–è¡¨è¾¾å¼ç­‰å·å³è¾¹çš„éƒ¨åˆ†ä¸èƒ½è®¿é—® Â  this ã€‚ 

---

**Redirecting constructorsï¼ˆé‡å®šå‘æ„é€ å‡½æ•°ï¼‰**
* æœ‰æ—¶å€™ä¸€ä¸ªæ„é€ å‡½æ•°ä¼šè°ƒåŠ¨ç±»ä¸­çš„å…¶ä»–æ„é€ å‡½æ•°ã€‚ ä¸€ä¸ªé‡å®šå‘æ„é€ å‡½æ•°æ˜¯æ²¡æœ‰ä»£ç çš„ï¼Œåœ¨æ„é€ å‡½æ•°å£°æ˜åï¼Œä½¿ç”¨ å†’å·è°ƒç”¨å…¶ä»–æ„é€ å‡½æ•°ã€‚

```dart
  class Point { 
  num x; 
  num y; 

  // The main constructor for this class. 
  Point ( this .x, this .y); 

  // Delegates to the main constructor. 
  Point .alongXAxis( num x) : this (x, 0 ); 
} 
```

---

**Constant constructorsï¼ˆå¸¸é‡æ„é€ å‡½æ•°ï¼‰**
* å¦‚æœä½ çš„ç±»æä¾›ä¸€ä¸ªçŠ¶æ€ä¸å˜çš„å¯¹è±¡ï¼Œä½ å¯ä»¥æŠŠè¿™äº›å¯¹è±¡ å®šä¹‰ä¸ºç¼–è¯‘æ—¶å¸¸é‡ã€‚è¦å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œéœ€è¦å®šä¹‰ä¸€ä¸ª Â  const Â  æ„é€ å‡½æ•°ï¼Œ å¹¶ä¸”å£°æ˜æ‰€æœ‰ç±»çš„å˜é‡ä¸º Â  final ã€‚ 

```dart
class ImmutablePoint { 
  final num x; 
  final num y; 
  const ImmutablePoint ( this .x, this .y); 
  static final ImmutablePoint origin = 
      const ImmutablePoint ( 0 , 0 ); 
} 
```

---

**Factory constructorsï¼ˆå·¥å‚æ–¹æ³•æ„é€ å‡½æ•°ï¼‰**
* å¦‚æœä¸€ä¸ªæ„é€ å‡½æ•°å¹¶ä¸æ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œåˆ™ä½¿ç”¨ Â  factory Â  æ¥å®šä¹‰ è¿™ä¸ªæ„é€ å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå·¥å‚æ„é€ å‡½æ•° å¯èƒ½ä»ç¼“å­˜ä¸­è·å–ä¸€ä¸ªå®ä¾‹å¹¶è¿”å›ï¼Œæˆ–è€… è¿”å›ä¸€ä¸ªå­ç±»å‹çš„å®ä¾‹ã€‚ 
ä¸‹é¢ä»£ç æ¼”ç¤ºå·¥å‚æ„é€ å‡½æ•° å¦‚ä½•ä»ç¼“å­˜ä¸­è¿”å›å¯¹è±¡ã€‚ 

```dart
class Logger { 
  final String name; 
  bool mute = false ; 

  // _cache is library-private, thanks to the _ in front 
  // of its name. 
  static final Map < String , Logger > _cache = 
      < String , Logger >{}; 

  factory Logger ( String name) { 
    if (_cache.containsKey(name)) { 
      return _cache[name]; 
    } else { 
      final logger = new Logger ._internal(name); 
      _cache[name] = logger; 
      return logger; 
    } 
  } 

  Logger ._internal( this .name); 

  void log( String msg) { 
    if (!mute) { 
      print(msg); 
    } 
  } 
} 
```

* æ³¨æ„ï¼š Â  å·¥å‚æ„é€ å‡½æ•°æ— æ³•è®¿é—® Â  this ã€‚ 
* ä½¿ç”¨ Â  new Â  å…³é”®å­—æ¥è°ƒç”¨å·¥å‚æ„é€ å‡½æ•°ã€‚ 

```dart
var logger = new Logger ( 'UI' ); 
logger.log( 'Button clicked' ); 
```

* ä¸‹é¢ä»£ç æ¼”ç¤ºå·¥å‚æ„é€ å‡½æ•° å¦‚ä½•ä»ç¼“å­˜ä¸­è¿”å›å¯¹è±¡ã€‚

```dart
class Logger { 
  final String name; 
  bool mute = false ; 

  // _cache is library-private, thanks to the _ in front 
  // of its name. 
  static final Map < String , Logger > _cache = 
      < String , Logger >{}; 

  factory Logger ( String name) { 
    if (_cache.containsKey(name)) { 
      return _cache[name]; 
    } else { 
      final logger = new Logger ._internal(name); 
      _cache[name] = logger; 
      return logger; 
    } 
  } 

  Logger ._internal( this .name); 

  void log( String msg) { 
    if (!mute) { 
      print(msg); 
    } 
  } 
} 
```

---

**Methodsï¼ˆå‡½æ•°ï¼‰**
* å‡½æ•°æ˜¯ç±»ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œæ˜¯ç±»å¯¹è±¡çš„è¡Œä¸ºã€‚

**Instance methodsï¼ˆå®ä¾‹å‡½æ•°ï¼‰**
* å¯¹è±¡çš„å®ä¾‹å‡½æ•°å¯ä»¥è®¿é—® Â  this ã€‚ ä¾‹å¦‚ä¸‹é¢ç¤ºä¾‹ä¸­çš„ Â  distanceTo() Â  å‡½æ•° å°±æ˜¯å®ä¾‹å‡½æ•°ï¼š 

```dart
import 'Dart:math' ; 

class Point { 
  num x; 
  num y; 
  Point ( this .x, this .y); 

  num distanceTo( Point other) { 
    var dx = x - other.x; 
    var dy = y - other.y; 
    return sqrt(dx * dx + dy * dy); 
  } 
} 
```

---

**Getters and setters**
* Getters å’Œ setters æ˜¯ç”¨æ¥è®¾ç½®å’Œè®¿é—®å¯¹è±¡å±æ€§çš„ç‰¹æ®Š å‡½æ•°ã€‚æ¯ä¸ªå®ä¾‹å˜é‡éƒ½éšå«çš„å…·æœ‰ä¸€ä¸ª getter ï¼Œ å¦‚æœå˜é‡ä¸æ˜¯ final çš„åˆ™è¿˜æœ‰ä¸€ä¸ª setter ã€‚ ä½ å¯ä»¥é€šè¿‡å®è¡Œ getter å’Œ setter æ¥åˆ›å»ºæ–°çš„å±æ€§ï¼Œ ä½¿ç”¨ Â  get Â  å’Œ Â  set Â  å…³é”®å­—å®šä¹‰ getter å’Œ setter ï¼š 

```dart
class Rectangle { 
  num left; 
  num top; 
  num width; 
  num height; 

  Rectangle ( this .left, this .top, this .width, this .height); 

  // Define two calculated properties: right and bottom. 
  num get right             => left + width; 
      set right( num value)  => left = value - width; 
  num get bottom            => top + height; 
      set bottom( num value) => top = value - height; 
} 

main() { 
  var rect = new Rectangle ( 3 , 4 , 20 , 15 ); 
  assert (rect.left == 3 ); 
  rect.right = 12 ; 
  assert (rect.left == - 8 ); 
} 
```

* getter å’Œ setter çš„å¥½å¤„æ˜¯ï¼Œä½ å¯ä»¥å¼€å§‹ä½¿ç”¨å®ä¾‹å˜é‡ï¼Œåæ¥ ä½ å¯ä»¥æŠŠå®ä¾‹å˜é‡ç”¨å‡½æ•°åŒ…è£¹èµ·æ¥ï¼Œè€Œè°ƒç”¨ä½ ä»£ç çš„åœ°æ–¹ä¸éœ€è¦ä¿®æ”¹ã€‚ 
* æ³¨æ„ï¼š Â  åƒ (++) è¿™ç§æ“ä½œç¬¦ä¸ç®¡æ˜¯å¦å®šä¹‰ getter éƒ½ä¼šæ­£ç¡®çš„æ‰§è¡Œã€‚ ä¸ºäº†é¿å…å…¶ä»–å‰¯ä½œç”¨ï¼Œ æ“ä½œç¬¦åªè°ƒç”¨ getter ä¸€æ¬¡ï¼Œç„¶å æŠŠå…¶å€¼ä¿å­˜åˆ°ä¸€ä¸ªä¸´æ—¶å˜é‡ä¸­ã€‚ 

---

**Abstract methodsï¼ˆæŠ½è±¡å‡½æ•°ï¼‰**
* å®ä¾‹å‡½æ•°ã€ getter ã€å’Œ setter å‡½æ•°å¯ä»¥ä¸ºæŠ½è±¡å‡½æ•°ï¼Œ æŠ½è±¡å‡½æ•°æ˜¯åªå®šä¹‰å‡½æ•°æ¥å£ä½†æ˜¯æ²¡æœ‰å®ç°çš„å‡½æ•°ï¼Œç”±å­ç±»æ¥ å®ç°è¯¥å‡½æ•°ã€‚å¦‚æœç”¨åˆ†å·æ¥æ›¿ä»£å‡½æ•°ä½“åˆ™è¿™ä¸ªå‡½æ•°å°±æ˜¯æŠ½è±¡å‡½æ•°ã€‚ 

```dart
abstract class Doer { 
  // ...Define instance variables and methods... 

  void doSomething(); // Define an abstract method. 
} 

class EffectiveDoer extends Doer { 
  void doSomething() { 
    // ...Provide an implementation, so the method is not abstract here... 
  } 
} 
```

* è°ƒç”¨ä¸€ä¸ªæ²¡å®ç°çš„æŠ½è±¡å‡½æ•°ä¼šå¯¼è‡´è¿è¡Œæ—¶å¼‚å¸¸ã€‚ 
* å¦å¤–å‚è€ƒ Â æŠ½è±¡ç±» ã€‚ 

---

**Overridable operatorsï¼ˆå¯è¦†å†™çš„æ“ä½œç¬¦ï¼‰**
* ä¸‹è¡¨ä¸­çš„æ“ä½œç¬¦å¯ä»¥è¢«è¦†å†™ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœä½ å®šä¹‰äº†ä¸€ä¸ª Vector ç±»ï¼Œ ä½ å¯ä»¥å®šä¹‰ä¸€ä¸ª Â  + Â  å‡½æ•°æ¥å®ç°ä¸¤ä¸ªå‘é‡ç›¸åŠ ã€‚ 

```
< 
+ 
| 
[] 
> 
/ 
^ 
[]= 
<= 
~/ 
& 
~ 
>= 
* 
<< 
== 
â€“ 
% 
>> 
```

* ä¸‹é¢æ˜¯è¦†å†™äº† Â  + Â  å’Œ Â  - Â  æ“ä½œç¬¦çš„ç¤ºä¾‹ï¼š 

```dart
class Vector { 
  final int x; 
  final int y; 
  const Vector ( this .x, this .y); 

  /// Overrides + (a + b). 
  Vector operator +( Vector v) { 
    return new Vector (x + v.x, y + v.y); 
  } 

  /// Overrides - (a - b). 
  Vector operator -( Vector v) { 
    return new Vector (x - v.x, y - v.y); 
  } 
} 

main() { 
  final v = new Vector ( 2 , 3 ); 
  final w = new Vector ( 2 , 2 ); 

  // v == (2, 3) 
  assert (v.x == 2 && v.y == 3 ); 

  // v + w == (4, 5) 
  assert ((v + w).x == 4 && (v + w).y == 5 ); 

  // v - w == (0, 1) 
  assert ((v - w).x == 0 && (v - w).y == 1 ); 
} 
```

* å¦‚æœä½ è¦†å†™äº† Â  == Â  ï¼Œåˆ™è¿˜åº”è¯¥è¦†å†™å¯¹è±¡çš„ Â  hashCode Â getter å‡½æ•°ã€‚ å…³äº è¦†å†™ Â  == Â  å’Œ Â  hashCode Â  çš„ç¤ºä¾‹è¯·å‚è€ƒ Â å®ç° map çš„ keys ã€‚ 
å…³äºè¦†å†™çš„æ›´å¤šä¿¡æ¯è¯·å‚è€ƒ Â æ‰©å±•ç±» ã€‚ 

---

**Abstract classesï¼ˆæŠ½è±¡ç±»ï¼‰**
* æŠ½è±¡ç±»é€šå¸¸ç”¨æ¥å®šä¹‰æ¥å£ï¼Œ ä»¥åŠéƒ¨åˆ†å®ç°ã€‚
* å¦‚æœä½ å¸Œæœ›ä½ çš„æŠ½è±¡ç±» æ˜¯å¯ç¤ºä¾‹åŒ–çš„ï¼Œåˆ™å®šä¹‰ä¸€ä¸ª å·¥å‚ æ„é€ å‡½æ•°ã€‚
* ä½¿ç”¨ Â  abstract Â  ä¿®é¥°ç¬¦å®šä¹‰ä¸€ä¸ª Â  æŠ½è±¡ç±» â€” ä¸€ä¸ªä¸èƒ½è¢«å®ä¾‹åŒ–çš„ç±»ã€‚ æŠ½è±¡ç±»é€šå¸¸ç”¨æ¥å®šä¹‰æ¥å£ï¼Œ ä»¥åŠéƒ¨åˆ†å®ç°ã€‚å¦‚æœä½ å¸Œæœ›ä½ çš„æŠ½è±¡ç±» æ˜¯å¯ç¤ºä¾‹åŒ–çš„ï¼Œåˆ™å®šä¹‰ä¸€ä¸ª Â å·¥å‚ æ„é€ å‡½æ•° ã€‚ 
* æŠ½è±¡ç±»é€šå¸¸å…·æœ‰ Â æŠ½è±¡å‡½æ•° ã€‚ ä¸‹é¢æ˜¯å®šä¹‰å…·æœ‰æŠ½è±¡å‡½æ•°çš„ æŠ½è±¡ç±»çš„ç¤ºä¾‹ï¼š 

```
// This class is declared abstract and thus 
// can't be instantiated. 
abstract class AbstractContainer { 
  // ...Define constructors, fields, methods... 

  void updateChildren(); // Abstract method. 
} 
```

* ä¸‹é¢çš„ç±»ä¸æ˜¯æŠ½è±¡çš„ï¼Œä½†æ˜¯å®šä¹‰äº†ä¸€ä¸ªæŠ½è±¡å‡½æ•°ï¼Œè¿™æ · çš„ç±»æ˜¯å¯ä»¥è¢«å®ä¾‹åŒ–çš„ï¼š 

```
class SpecializedContainer extends AbstractContainer { 
  // ...Define more constructors, fields, methods... 

  void updateChildren() { 
    // ...Implement updateChildren()... 
  } 

  // Abstract method causes a warning but 
  // doesn't prevent instantiation. 
  void doSomething(); 
} 
```

---

**Implicit interfacesï¼ˆéšå¼æ¥å£ï¼‰**
* æ¯ä¸ªç±»éƒ½éšå¼çš„å®šä¹‰äº†ä¸€ä¸ªåŒ…å«æ‰€æœ‰å®ä¾‹æˆå‘˜çš„æ¥å£ï¼Œ å¹¶ä¸”è¿™ä¸ªç±»å®ç°äº†è¿™ä¸ªæ¥å£ã€‚å¦‚æœä½ æƒ³ åˆ›å»ºç±» A æ¥æ”¯æŒ ç±» B çš„ api ï¼Œè€Œä¸æƒ³ç»§æ‰¿ B çš„å®ç°ï¼Œ åˆ™ç±» A åº”è¯¥å®ç° B çš„æ¥å£ã€‚ 
* ä¸‹é¢æ˜¯å®ç°å¤šä¸ªæ¥å£ çš„ç¤ºä¾‹ï¼š

```dart
class Point implements Comparable , Location { 
  // ... 
} 
```

* ä¸€ä¸ªç±»å¯ä»¥é€šè¿‡ implements å…³é”®å­—æ¥å®ç°ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ¥å£ï¼Œ å¹¶å®ç°æ¯ä¸ªæ¥å£å®šä¹‰çš„ APIã€‚ ä¾‹å¦‚

```dart
// A person. The implicit interface contains greet(). 
class Person { 
  // In the interface, but visible only in this library. 
  final _name; 

  // Not in the interface, since this is a constructor. 
  Person ( this ._name); 

  // In the interface. 
  String greet(who) => 'Hello, $who. I am $_name.' ; 
} 

// An implementation of the Person interface. 
class Imposter implements Person { 
  // We have to define this, but we don't use it. 
  final _name = "" ; 

  String greet(who) => 'Hi $who. Do you know who I am?' ; 
} 

greetBob( Person person) => person.greet( 'bob' ); 

main() { 
  print(greetBob( new Person ( 'kathy' ))); 
  print(greetBob( new Imposter ())); 
} 
```

---

**Extending a classï¼ˆæ‰©å±•ç±»ï¼‰**
* ç”¨ @proxy æ³¨è§£æ¥é¿å…è­¦å‘Šä¿¡æ¯ï¼š
* å¦‚æœä½ ä½¿ç”¨ Â  noSuchMethod() Â  å‡½æ•°æ¥å®ç°æ¯ä¸ªå¯èƒ½çš„ getter ã€ setter ã€ ä»¥åŠå…¶ä»–ç±»å‹çš„å‡½æ•°ï¼Œä½ å¯ä»¥ä½¿ç”¨ Â  @proxy Â  æ³¨è§£æ¥é¿å…è­¦å‘Šä¿¡æ¯ï¼š 

```dart
@proxy 
class A { 
  void noSuchMethod( Invocation mirror) { 
    // ... 
  } 
} 
```

* ä½¿ç”¨ @override æ³¨è§£æ¥ è¡¨æ˜ä½ çš„å‡½æ•°æ˜¯æƒ³è¦†å†™è¶…ç±»çš„ä¸€ä¸ªå‡½æ•°ï¼š
* è¿˜å¯ä»¥ä½¿ç”¨ Â  @override Â  æ³¨è§£æ¥ è¡¨æ˜ä½ çš„å‡½æ•°æ˜¯æƒ³è¦†å†™è¶…ç±»çš„ä¸€ä¸ªå‡½æ•°ï¼š 

```dart
class A { 
  @override 
  void noSuchMethod( Invocation mirror) { 
    // ... 
  } 
} 
```

* å­ç±»å¯ä»¥è¦†å†™å®ä¾‹å‡½æ•°ï¼Œgetter å’Œ setterã€‚
* å­ç±»å¯ä»¥è¦†å†™å®ä¾‹å‡½æ•°ï¼Œ getter å’Œ setter ã€‚ ä¸‹é¢æ˜¯è¦†å†™ Object ç±»çš„ Â  noSuchMethod() Â  å‡½æ•°çš„ä¾‹å­ï¼Œ å¦‚æœè°ƒç”¨äº†å¯¹è±¡ä¸Šä¸å­˜åœ¨çš„å‡½æ•°ï¼Œåˆ™å°±ä¼šè§¦å‘ Â  noSuchMethod() Â  å‡½ æ•°ã€‚ 

```dart
class A { 
  // Unless you override noSuchMethod, using a 
  // non-existent member results in a NoSuchMethodError. 
  void noSuchMethod( Invocation mirror) { 
    print( 'You tried to use a non-existent member:' + 
          '${mirror.memberName}' ); 
  } 
} 
```

* ä½¿ç”¨ extends å®šä¹‰å­ç±»ï¼Œ supper å¼•ç”¨ è¶…ç±»ï¼š

```dart
class Television { 
  void turnOn() { 
    _illuminateDisplay(); 
    _activateIrSensor(); 
  } 
  // ... 
} 

class SmartTelevision extends Television { 
  void turnOn() { 
    super .turnOn(); 
    _bootNetworkInterface(); 
    _initializeMemory(); 
    _upgradeApps(); 
  } 
  // ... 
} 
```

* å¦‚æœä½ çŸ¥é“ç¼–è¯‘æ—¶çš„å…·ä½“ç±»å‹ï¼Œåˆ™å¯ä»¥ å®ç°è¿™äº›ç±»æ¥é¿å…è­¦å‘Šï¼Œå’Œ ä½¿ç”¨ @proxy æ•ˆæœä¸€æ ·ï¼š

```dart
class A implements SomeClass , SomeOtherClass { 
  void noSuchMethod( Invocation mirror) { 
    // ... 
  } 
} 
```

---

**Enumerated typesï¼ˆæšä¸¾ç±»å‹ï¼‰**
* å¯ä»¥åœ¨ Â switch è¯­å¥ Â  ä¸­ä½¿ç”¨æšä¸¾ã€‚ å¦‚æœåœ¨ Â  switch (e ) Â  ä¸­çš„ Â e Â  çš„ç±»å‹ä¸ºæšä¸¾ç±»ï¼Œ å¦‚æœä½ æ²¡æœ‰å¤„ç†æ‰€æœ‰è¯¥æšä¸¾ç±»å‹çš„å€¼çš„è¯ï¼Œåˆ™ä¼šæŠ›å‡ºä¸€ä¸ªè­¦å‘Šï¼š 

```dart
enum Color { 
  red, 
  green, 
  blue 
} 
// ... 
Color aColor = Color .blue; 
switch (aColor) { 
  case Color .red: 
    print( 'Red as roses!' ); 
    break ; 
  case Color .green: 
    print( 'Green as grass!' ); 
    break ; 
  default : // Without this, you see a WARNING. 
    print(aColor);  // 'Color.blue' 
}
```

* æšä¸¾ç±»å‹å…·æœ‰å¦‚ä¸‹çš„é™åˆ¶ï¼š 
	* æ— æ³•ç»§æ‰¿æšä¸¾ç±»å‹ã€æ— æ³•ä½¿ç”¨ mix in ã€æ— æ³•å®ç°ä¸€ä¸ªæšä¸¾ç±»å‹ 
	* æ— æ³•æ˜¾ç¤ºçš„åˆå§‹åŒ–ä¸€ä¸ªæšä¸¾ç±»å‹ 
* è¯¦æƒ…è¯·å‚è€ƒ Â Dart è¯­è¨€è§„èŒƒ ã€‚ 
* æšä¸¾çš„ values å¸¸é‡å¯ä»¥è¿”å› æ‰€æœ‰çš„æšä¸¾å€¼ã€‚

```dart
List < Color > colors = Color .values; 
assert (colors[ 2 ] == Color .blue); 
```

* ä½¿ç”¨ enum å…³é”®å­—æ¥å®šä¹‰æšä¸¾ç±»å‹ï¼š

```
enum Color { 
  red, 
  green, 
  blue 
}
```

* æšä¸¾ç±»å‹ä¸­çš„æ¯ä¸ªå€¼éƒ½æœ‰ä¸€ä¸ª index getter å‡½æ•°ï¼Œ è¯¥å‡½æ•°è¿”å›è¯¥å€¼åœ¨æšä¸¾ç±»å‹å®šä¹‰ä¸­çš„ä½ç½®ï¼ˆä» 0 å¼€å§‹ï¼‰ã€‚ ä¾‹å¦‚ï¼Œç¬¬ä¸€ä¸ªæšä¸¾å€¼çš„ä½ç½®ä¸º 0ï¼Œ ç¬¬äºŒä¸ªä¸º 1.

```dart
assert ( Color .red.index == 0 ); 
assert ( Color .green.index == 1 ); 
assert ( Color .blue.index == 2 ); 
```

* Adding features to a class: mixinsï¼ˆä¸ºç±»æ·»åŠ æ–°çš„åŠŸèƒ½ï¼‰
* æ³¨æ„ï¼š Â  ä» Dart 1.13 å¼€å§‹ï¼Œ è¿™ä¸¤ä¸ªé™åˆ¶åœ¨ Dart VM ä¸Š æ²¡æœ‰é‚£ä¹ˆä¸¥æ ¼äº†ï¼š 
	* Mixins å¯ä»¥ç»§æ‰¿å…¶ä»–ç±»ï¼Œä¸å†é™åˆ¶ä¸ºç»§æ‰¿ Object 
	* Mixins å¯ä»¥è°ƒç”¨ Â  super() ã€‚ 
* è¿™ç§ â€œsuper mixinsâ€ è¿˜ Â æ— æ³•åœ¨ Dart2js ä¸­ä½¿ç”¨ Â  å¹¶ä¸”éœ€è¦åœ¨ Dartanalyzer ä¸­ä½¿ç”¨ Â  --supermixin Â  å‚æ•°ã€‚ 
* è¯¦æƒ…ï¼Œè¯·å‚è€ƒ Â Mixins in Dart ã€‚ 
* Mixins æ˜¯ä¸€ç§åœ¨å¤šç±»ç»§æ‰¿ä¸­é‡ç”¨ ä¸€ä¸ªç±»ä»£ç çš„æ–¹æ³•ã€‚
* ä½¿ç”¨ with å…³é”®å­—åé¢ä¸ºä¸€ä¸ªæˆ–è€…å¤šä¸ª mixin åå­—æ¥ä½¿ç”¨ mixinã€‚

```dart
class Musician extends Performer with Musical { 
  // ... 
} 

class Maestro extends Person 
    with Musical , Aggressive , Demented { 
  Maestro ( String maestroName) { 
    name = maestroName; 
    canConduct = true ; 
  } 
} 
```

* å®šä¹‰ä¸€ä¸ªç±»ç»§æ‰¿ Objectï¼Œè¯¥ç±»æ²¡æœ‰æ„é€ å‡½æ•°ï¼Œ ä¸èƒ½è°ƒç”¨ super ï¼Œåˆ™è¯¥ç±»å°±æ˜¯ä¸€ä¸ª mixin

```dart
abstract class Musical { 
  bool canPlayPiano = false ; 
  bool canCompose = false ; 
  bool canConduct = false ; 

  void entertainMe() { 
    if (canPlayPiano) { 
      print( 'Playing piano' ); 
    } else if (canConduct) { 
      print( 'Waving hands' ); 
    } else { 
      print( 'Humming to self' ); 
    } 
  } 
} 
```


**Class variables and methodsï¼ˆç±»å˜é‡å’Œå‡½æ•°ï¼‰**
* ä½¿ç”¨ static å…³é”®å­—æ¥å®ç°ç±»çº§åˆ«çš„å˜é‡å’Œå‡½æ•°ã€‚
* Static variablesï¼ˆé™æ€å˜é‡ï¼‰
* é™æ€å˜é‡å¯¹äºç±»çº§åˆ«çš„çŠ¶æ€æ˜¯ éå¸¸æœ‰ç”¨çš„ï¼š

```dart
class Color { 
  static const red = 
      const Color ( 'red' ); // A constant static variable. 
  final String name;      // An instance variable. 
  const Color ( this .name); // A constant constructor. 
} 

main() { 
  assert ( Color .red.name == 'red' ); 
}
```

* é™æ€å˜é‡åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„æ—¶å€™æ‰è¢«åˆå§‹åŒ–ã€‚ 
* æ³¨æ„ï¼š Â  è¿™é‡Œå‡†å®ˆä»£ç é£æ ¼æ¨è Â  å‘½åè§„åˆ™ï¼Œä½¿ç”¨ Â  lowerCamelCase Â  æ¥å‘½åå¸¸é‡ã€‚ 

**Static methodsï¼ˆé™æ€å‡½æ•°ï¼‰**
* é™æ€å‡½æ•°ä¸åœ¨ç±»å®ä¾‹ä¸Šæ‰§è¡Œï¼Œ æ‰€ä»¥æ— æ³•è®¿é—® thisã€‚

```dart
import 'Dart:math' ; 

class Point { 
  num x; 
  num y; 
  Point ( this .x, this .y); 

  static num distanceBetween( Point a, Point b) { 
    var dx = a.x - b.x; 
    var dy = a.y - b.y; 
    return sqrt(dx * dx + dy * dy); 
  } 
} 

main() { 
  var a = new Point ( 2 , 2 ); 
  var b = new Point ( 4 , 4 ); 
  var distance = Point .distanceBetween(a, b); 
  assert (distance < 2.9 && distance > 2.8 ); 
} 
```

* å¯¹äºé€šç”¨çš„æˆ–è€…ç»å¸¸ä½¿ç”¨çš„é™æ€å‡½æ•°ï¼Œè€ƒè™‘ ä½¿ç”¨é¡¶çº§æ–¹æ³•è€Œä¸æ˜¯é™æ€å‡½æ•°ã€‚
* é™æ€å‡½æ•°è¿˜å¯ä»¥å½“åšç¼–è¯‘æ—¶å¸¸é‡ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œ ä½ å¯ä»¥æŠŠé™æ€å‡½æ•°å½“åšå¸¸é‡æ„é€ å‡½æ•°çš„å‚æ•°æ¥ä½¿ç”¨ã€‚

### Dartçš„CallableClasseså¯è°ƒç”¨çš„ç±»

**Isolates**
* ç°ä»£çš„æµè§ˆå™¨ä»¥åŠç§»åŠ¨æµè§ˆå™¨éƒ½è¿è¡Œåœ¨å¤šæ ¸ CPU ç³»ç»Ÿä¸Šã€‚ è¦å……åˆ†åˆ©ç”¨è¿™äº› CPU ï¼Œå¼€å‘è€…ä¸€èˆ¬ä½¿ç”¨å…±äº«å†…å­˜ æ•°æ®æ¥ä¿è¯å¤šçº¿ç¨‹çš„æ­£ç¡®æ‰§è¡Œã€‚ç„¶è€Œï¼Œ å¤šçº¿ç¨‹å…±äº«æ•°æ®é€šå¸¸ä¼šå¯¼è‡´å¾ˆå¤šæ½œåœ¨çš„é—®é¢˜ï¼Œå¹¶å¯¼è‡´ä»£ç è¿è¡Œå‡ºé”™ã€‚ 
* æ‰€æœ‰çš„ Dart ä»£ç åœ¨ Â isolates Â  ä¸­è¿è¡Œè€Œä¸æ˜¯çº¿ç¨‹ã€‚ æ¯ä¸ª isolate éƒ½æœ‰è‡ªå·±çš„å †å†…å­˜ï¼Œå¹¶ä¸”ç¡®ä¿æ¯ä¸ª isolate çš„çŠ¶æ€éƒ½ä¸èƒ½è¢«å…¶ä»– isolate è®¿é—®ã€‚ 


**Typedefs**
* ä½¿ç”¨ typedef, æˆ–è€… function-type alias æ¥ä¸ºæ–¹æ³•ç±»å‹å‘½åï¼Œ ç„¶åå¯ä»¥ä½¿ç”¨å‘½åçš„æ–¹æ³•ã€‚
  
---

* åœ¨ Dart è¯­è¨€ä¸­ï¼Œæ–¹æ³•ä¹Ÿæ˜¯å¯¹è±¡ã€‚ ä½¿ç”¨ Â typedef , æˆ–è€… Â function-type alias Â  æ¥ä¸ºæ–¹æ³•ç±»å‹å‘½åï¼Œ ç„¶åå¯ä»¥ä½¿ç”¨å‘½åçš„æ–¹æ³•ã€‚ å½“æŠŠæ–¹æ³•ç±»å‹èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œ typedef ä¿ç•™ç±»å‹ä¿¡æ¯ã€‚ 
* ä¸‹é¢çš„ä»£ç æ²¡æœ‰ä½¿ç”¨ typedef ï¼š 

```dart
class SortedCollection { 
  Function compare; 

  SortedCollection ( int f( Object a, Object b)) { 
    compare = f; 
  } 
} 

  // Initial, broken implementation. 
  int sort( Object a, Object b) => 0 ; 

main() { 
  SortedCollection coll = new SortedCollection (sort); 

  // æˆ‘ä»¬åªçŸ¥é“ compare æ˜¯ä¸€ä¸ª Function ç±»å‹ï¼Œ 
  // ä½†æ˜¯ä¸çŸ¥é“å…·ä½“æ˜¯ä½•ç§ Function ç±»å‹ï¼Ÿ 
  assert (coll.compare is Function ); 
} 
```

* å½“æŠŠ Â  f Â  èµ‹å€¼ç»™ Â  compare Â  çš„æ—¶å€™ï¼Œ ç±»å‹ä¿¡æ¯ä¸¢å¤±äº†ã€‚ Â  f Â  çš„ç±»å‹æ˜¯ Â  (Object,Â Object) Â  â†’ Â  int Â ( è¿™é‡Œ â†’ ä»£è¡¨è¿”å›å€¼ç±»å‹ ) ï¼Œ å½“ç„¶è¯¥ç±»å‹æ˜¯ä¸€ä¸ª Function ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨æ˜¾å¼çš„åå­—å¹¶ä¿ç•™ç±»å‹ä¿¡æ¯ï¼Œ å¼€å‘è€…å’Œå·¥å…·å¯ä»¥ä½¿ç”¨ è¿™äº›ä¿¡æ¯ï¼š 

```dart
typedef int Compare ( Object a, Object b); 

class SortedCollection { 
  Compare compare; 

  SortedCollection ( this .compare); 
} 

  // Initial, broken implementation. 
  int sort( Object a, Object b) => 0 ; 

main() { 
  SortedCollection coll = new SortedCollection (sort); 
  assert (coll.compare is Function ); 
  assert (coll.compare is Compare ); 
} 
```

* æ³¨æ„ï¼š Â  ç›®å‰ï¼Œ typedefs åªèƒ½ä½¿ç”¨åœ¨ function ç±»å‹ä¸Šï¼Œä½†æ˜¯å°†æ¥ å¯èƒ½ä¼šæœ‰å˜åŒ–ã€‚ 
* ç”±äº typedefs åªæ˜¯åˆ«åï¼Œä»–ä»¬è¿˜æä¾›äº†ä¸€ç§ åˆ¤æ–­ä»»æ„ function çš„ç±»å‹çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š 

```dart
typedef int Compare ( int a, int b); 

int sort( int a, int b) => a - b; 

main() { 
  assert (sort is Compare ); // True! 
} 
```

### Dartçš„Numbers

* Numbersï¼ˆæ•°å€¼ï¼‰2019.2.13
* å­—ç¬¦ä¸²å’Œæ•°å­—ä¹‹é—´è½¬æ¢çš„æ–¹å¼
* Dart æ”¯æŒä¸¤ç§ç±»å‹çš„æ•°å­—ï¼š 
* int  :æ•´æ•°å€¼ï¼Œå…¶å–å€¼é€šå¸¸ä½äº -2 53 Â  å’Œ 2 53 Â  ä¹‹é—´ã€‚ 
* double :64-bit ( åŒç²¾åº¦ ) æµ®ç‚¹æ•°ï¼Œç¬¦åˆ IEEE 754 æ ‡å‡†ã€‚ 
* int Â  å’Œ Â  double Â  éƒ½æ˜¯ Â num Â  çš„å­ç±»ã€‚ num ç±»å‹å®šä¹‰äº†åŸºæœ¬çš„æ“ä½œç¬¦ï¼Œä¾‹å¦‚ +, -, /, å’Œ * ï¼Œ è¿˜å®šä¹‰äº† abs() ã€ Â ceil() ã€å’Œ Â  floor() Â  ç­‰ å‡½æ•°ã€‚ ( ä½æ“ä½œç¬¦ï¼Œä¾‹å¦‚ >> å®šä¹‰åœ¨ Â  int Â  ç±»ä¸­ã€‚ ) å¦‚æœ num æˆ–è€…å…¶å­ç±»å‹ä¸æ»¡è¶³ä½ çš„è¦æ±‚ï¼Œè¯·å‚è€ƒ Â Dart:math Â  åº“ã€‚ 
* æ³¨æ„ï¼š Â  ä¸åœ¨ -2 53 Â  åˆ° 2 53 Â  èŒƒå›´å†…çš„æ•´æ•°åœ¨ Dart ä¸­çš„è¡Œä¸º å’Œ JavaScript ä¸­è¡¨ç°ä¸ä¸€æ ·ã€‚ åŸå› åœ¨äº Dart å…·æœ‰ä»»æ„ç²¾åº¦çš„æ•´æ•°ï¼Œè€Œ JavaScript æ²¡æœ‰ã€‚ å‚è€ƒ Â é—®é¢˜ 1533 Â  äº†è§£æ›´å¤šä¿¡æ¯ã€‚ 
* æ•´æ•°æ˜¯ä¸å¸¦å°æ•°ç‚¹çš„æ•°å­—ã€‚ä¸‹é¢æ˜¯ä¸€äº›å®šä¹‰ æ•´æ•°çš„æ–¹å¼ï¼š 

```dart
var x = 1 ; 
var hex = 0xDEADBEEF ; 
var bigInt = 34653465834652437659238476592374958739845729 ; 
```

* å¦‚æœä¸€ä¸ªæ•°å¸¦å°æ•°ç‚¹ï¼Œåˆ™å…¶ä¸º double ï¼Œ ä¸‹é¢æ˜¯å®šä¹‰ double çš„ä¸€äº›æ–¹å¼ï¼š 

```dart
var y = 1.1 ; 
var exponents = 1.42e5 ; 
```

* ä¸‹é¢æ˜¯å­—ç¬¦ä¸²å’Œæ•°å­—ä¹‹é—´è½¬æ¢çš„æ–¹å¼ï¼š 

```dart
// String -> int 
var one = int .parse( '1' ); 
assert (one == 1 ); 

// String -> double 
var onePointOne = double .parse( '1.1' ); 
assert (onePointOne == 1.1 ); 

// int -> String 
String oneAsString = 1. toString(); 
assert (oneAsString == '1' ); 

// double -> String 
String piAsString = 3.14159 .toStringAsFixed( 2 ); 
assert (piAsString == '3.14' ); 
```

* æ•´æ•°ç±»å‹æ”¯æŒä¼ ç»Ÿçš„ä½ç§»æ“ä½œç¬¦ï¼Œ (<<, >>), AND (&), å’Œ OR (|) ã€‚ä¾‹å¦‚ï¼š

```dart
assert (( 3 << 1 ) == 6 );  // 0011 << 1 == 0110 
assert (( 3 >> 1 ) == 1 );  // 0011 >> 1 == 0001 
assert (( 3 | 4 )  == 7 );  // 0011 | 0100 == 0111 
```

* æ•°å­—å­—é¢é‡ä¸ºç¼–è¯‘æ—¶å¸¸é‡ã€‚ å¾ˆå¤šç®—æœ¯è¡¨è¾¾å¼ åªè¦å…¶æ“ä½œæ•°æ˜¯å¸¸é‡ï¼Œåˆ™è¡¨è¾¾å¼ç»“æœ ä¹Ÿæ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚ 

```dart
const msPerSecond = 1000 ; 
const secondsUntilRetry = 5 ; 
const msUntilRetry = secondsUntilRetry * msPerSecond; 
```

### Dartçš„Keywordå…³é”®å­—

* Keywordsï¼ˆå…³é”®å­—ï¼‰2019.2.13
* å¸¦æœ‰ä¸Šæ ‡ 1 çš„å…³é”®å­—æ˜¯ å†…ç½®å…³é”®å­—ã€‚é¿å…æŠŠå†…ç½®å…³é”®å­—å½“åšæ ‡è¯†ç¬¦ä½¿ç”¨ã€‚ ä¹Ÿä¸è¦æŠŠå†…ç½®å…³é”®å­— ç”¨ä½œç±»åå­—å’Œç±»å‹åå­—ã€‚ æœ‰äº›å†…ç½®å…³é”®å­—æ˜¯ä¸ºäº†æ–¹ä¾¿æŠŠ JavaScript ä»£ç ç§»æ¤åˆ° Dart è€Œå­˜åœ¨çš„ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœ JavaScript ä»£ç ä¸­æœ‰ä¸ªå˜é‡çš„åå­—ä¸º factoryï¼Œ åœ¨ç§»æ¤åˆ° Dart ä¸­çš„æ—¶å€™ï¼Œä½ ä¸å¿…é‡æ–°å‘½åè¿™ä¸ªå˜é‡ã€‚
* å¸¦æœ‰ä¸Šæ ‡ 2 çš„å…³é”®å­—ï¼Œæ˜¯åœ¨ Dart 1.0 å‘å¸ƒä»¥ååˆæ–°åŠ çš„ï¼Œç”¨äº æ”¯æŒå¼‚æ­¥ç›¸å…³çš„ç‰¹æ€§ã€‚ ä½ ä¸èƒ½åœ¨æ ‡è®°ä¸º asyncã€ async*ã€æˆ–è€… sync* çš„æ–¹æ³•ä½“å†… ä½¿ç”¨ asyncã€ awaitã€æˆ–è€… yield ä½œä¸ºæ ‡è¯†ç¬¦ã€‚ è¯¦æƒ…è¯·å‚è€ƒï¼šå¼‚æ­¥æ”¯æŒã€‚

**ä¸‹è¡¨ä¸º Dart è¯­è¨€çš„å…³é”®å­—**

```dart
abstractÂ  1 
continue 
false 
new 
this 
asÂ  1 
default 
final 
null 
throw 
assert 
deferredÂ  1 
finally 
operatorÂ  1 
true 
asyncÂ  2 
do 
for 
partÂ  1 
try 
async*Â  2 
dynamicÂ  1 
getÂ  1 
rethrow 
typedefÂ  1 
awaitÂ  2 
else 
if 
return 
var 
break 
enum 
implementsÂ  1 
setÂ  1 
void 
case 
exportÂ  1 
importÂ  1 
staticÂ  1 
while 
catch 
externalÂ  1 
in 
super 
with 
class 
extends 
is 
switch 
yieldÂ  2 
const 
factoryÂ  1 
libraryÂ  1 
sync*Â  2 
yield*Â  2 
```

### Dartçš„AsynchronySupportå¼‚æ­¥æ”¯æŒ

** Dart æœ‰ä¸€äº›è¯­è¨€ç‰¹æ€§æ¥æ”¯æŒ å¼‚æ­¥ç¼–ç¨‹**
* æœ€å¸¸è§çš„ç‰¹æ€§æ˜¯ async æ–¹æ³•å’Œ await è¡¨è¾¾å¼ã€‚
* Dart åº“ä¸­æœ‰å¾ˆå¤šè¿”å› Future æˆ–è€… Stream å¯¹è±¡çš„æ–¹æ³•ã€‚ è¿™äº›æ–¹æ³•æ˜¯ å¼‚æ­¥çš„
* æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥ä½¿ç”¨ Future å¯¹è±¡ä¸­çš„ æ•°æ®ï¼š
	* ä½¿ç”¨ async å’Œ await
	* ä½¿ç”¨ Future API
* ä» Stream ä¸­è·å–æ•°æ®ä¹Ÿæœ‰ä¸¤ç§ æ–¹å¼ï¼š
	* ä½¿ç”¨ async å’Œä¸€ä¸ª å¼‚æ­¥ for å¾ªç¯ (await for)
	* ä½¿ç”¨ Stream API

---

**è¦ä½¿ç”¨ awaitï¼Œå…¶æ–¹æ³•å¿…é¡»å¸¦æœ‰ async å…³é”®å­—ï¼š**

```dart
checkVersion() async { 
  var version = await lookUpVersion(); 
  if (version == expectedVersion) { 
    // Do something. 
  } else { 
    // Do something else. 
  } 
} 
```

---

** Declaring async functionsï¼ˆå£°æ˜å¼‚æ­¥æ–¹æ³•ï¼‰**
* ä¸€ä¸ª Â async æ–¹æ³• Â  æ˜¯å‡½æ•°ä½“è¢«æ ‡è®°ä¸º Â  async Â  çš„æ–¹æ³•ã€‚ è™½ç„¶å¼‚æ­¥æ–¹æ³•çš„æ‰§è¡Œå¯èƒ½éœ€è¦ä¸€å®šæ—¶é—´ï¼Œä½†æ˜¯ å¼‚æ­¥æ–¹æ³•ç«‹åˆ»è¿”å› - åœ¨æ–¹æ³•ä½“è¿˜æ²¡æ‰§è¡Œä¹‹å‰å°±è¿”å›äº†ã€‚ 

```dart
checkVersion() async { 
  // ... 
} 

lookUpVersion() async => /* ... */ ; 
```

* åœ¨ä¸€ä¸ªæ–¹æ³•ä¸Šæ·»åŠ  Â  async Â  å…³é”®å­—ï¼Œåˆ™è¿™ä¸ªæ–¹æ³•è¿”å›å€¼ä¸º Future ã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªè¿”å›å­—ç¬¦ä¸² çš„åŒæ­¥æ–¹æ³•ï¼š 

```dart
String lookUpVersionSync() => '1.0.0' ;
```

* å¦‚æœä½¿ç”¨ async å…³é”®å­—ï¼Œåˆ™è¯¥æ–¹æ³• è¿”å›ä¸€ä¸ª Future ï¼Œå¹¶ä¸” è®¤ä¸ºè¯¥å‡½æ•°æ˜¯ä¸€ä¸ªè€—æ—¶çš„æ“ä½œã€‚

```dart
Future < String > lookUpVersion() async => '1.0.0' ; 
```

* æ³¨æ„ï¼Œæ–¹æ³•çš„å‡½æ•°ä½“å¹¶ä¸éœ€è¦ä½¿ç”¨ Future API ã€‚ Dart ä¼šè‡ªåŠ¨åœ¨éœ€è¦çš„æ—¶å€™åˆ›å»º Future å¯¹è±¡ã€‚ 
* ä¸€ä¸ª async æ–¹æ³• æ˜¯å‡½æ•°ä½“è¢«æ ‡è®°ä¸º async çš„æ–¹æ³•ã€‚
* åœ¨ä¸€ä¸ªæ–¹æ³•ä¸Šæ·»åŠ  async å…³é”®å­—ï¼Œåˆ™è¿™ä¸ªæ–¹æ³•è¿”å›å€¼ä¸º Futureã€‚

```dart
String lookUpVersionSync() => '1.0.0' ; 
```

* å¦‚æœä½¿ç”¨ async å…³é”®å­—ï¼Œåˆ™è¯¥æ–¹æ³• è¿”å›ä¸€ä¸ª Futureï¼Œå¹¶ä¸” è®¤ä¸ºè¯¥å‡½æ•°æ˜¯ä¸€ä¸ªè€—æ—¶çš„æ“ä½œã€‚

```dart
Future < String > lookUpVersion() async => '1.0.0' ; 
```

** Using await expressions with Futuresï¼ˆä½¿ç”¨ await è¡¨è¾¾å¼ï¼‰**

* await è¡¨è¾¾å¼å…·æœ‰å¦‚ä¸‹çš„å½¢å¼ï¼š 
* await expression 
* åœ¨ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•å†…å¯ä»¥ä½¿ç”¨å¤šæ¬¡ Â  await Â  è¡¨è¾¾å¼ã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢çš„ç¤ºä¾‹ä½¿ç”¨äº†ä¸‰æ¬¡ Â  await Â  è¡¨è¾¾å¼ æ¥æ‰§è¡Œç›¸å…³çš„åŠŸèƒ½ï¼š 

```dart
var entrypoint = await findEntrypoint(); 
var exitCode = await runExecutable(entrypoint, args); 
await flushThenExit(exitCode); 
```

* åœ¨ Â  awaitÂ expression Â  ä¸­ï¼Œ Â  expression Â  çš„è¿”å›å€¼é€šå¸¸æ˜¯ä¸€ä¸ª Future ï¼› å¦‚æœè¿”å›çš„å€¼ä¸æ˜¯ Future ï¼Œåˆ™ Dart ä¼šè‡ªåŠ¨æŠŠè¯¥å€¼æ”¾åˆ° Future ä¸­è¿”å›ã€‚ Future å¯¹è±¡ä»£è¡¨è¿”å›ä¸€ä¸ªå¯¹è±¡çš„æ‰¿è¯ºï¼ˆ promise ï¼‰ã€‚ Â  awaitexpression Â  æ‰§è¡Œçš„ç»“æœä¸ºè¿™ä¸ªè¿”å›çš„å¯¹è±¡ã€‚ await expression ä¼šé˜»å¡ä½ï¼Œç›´åˆ°éœ€è¦çš„å¯¹è±¡è¿”å›ä¸ºæ­¢ã€‚ 
* å¦‚æœ Â  await Â  æ— æ³•æ­£å¸¸ä½¿ç”¨ï¼Œè¯·ç¡®ä¿æ˜¯åœ¨ä¸€ä¸ª async æ–¹æ³•ä¸­ã€‚ Â  ä¾‹å¦‚è¦åœ¨ Â  main() Â  æ–¹æ³•ä¸­ä½¿ç”¨ Â  await ï¼Œ åˆ™ Â  main() Â  æ–¹æ³•çš„å‡½æ•°ä½“å¿…é¡»æ ‡è®°ä¸º Â  async ï¼š

```dart
main() async { 
  checkVersion(); 
  print( 'In main: version is ${await lookUpVersion()}' ); 
} 
```

* åœ¨ await expression ä¸­ï¼Œ expression çš„è¿”å›å€¼é€šå¸¸æ˜¯ä¸€ä¸ª Futureï¼›
* å¦‚æœè¿”å›çš„å€¼ä¸æ˜¯ Futureï¼Œåˆ™ Dart ä¼šè‡ªåŠ¨æŠŠè¯¥å€¼æ”¾åˆ° Future ä¸­è¿”å›ã€‚
* Future å¯¹è±¡ä»£è¡¨è¿”å›ä¸€ä¸ªå¯¹è±¡çš„æ‰¿è¯ºï¼ˆpromiseï¼‰ã€‚
* await expression æ‰§è¡Œçš„ç»“æœä¸ºè¿™ä¸ªè¿”å›çš„å¯¹è±¡ã€‚
* await expression ä¼šé˜»å¡ä½ï¼Œç›´åˆ°éœ€è¦çš„å¯¹è±¡è¿”å›ä¸ºæ­¢ã€‚
* å¦‚è¦åœ¨ main() æ–¹æ³•ä¸­ä½¿ç”¨ awaitï¼Œ åˆ™ main() æ–¹æ³•çš„å‡½æ•°ä½“å¿…é¡»æ ‡è®°ä¸º asyncï¼š

```dart
main() async { 
  checkVersion(); 
  print( 'In main: version is ${await lookUpVersion()}' ); 
} 
```

** Using asynchronous for loops with Streamsï¼ˆåœ¨å¾ªç¯ä¸­ä½¿ç”¨å¼‚æ­¥ï¼‰**

* å¼‚æ­¥ for å¾ªç¯å…·æœ‰å¦‚ä¸‹çš„å½¢å¼ï¼š

```dart
await for (variable declaration in expression ) { 
  // Executes each time the stream emits a value. 
} 
```

* ä¸Šé¢ Â  expression Â  è¿”å›çš„å€¼å¿…é¡»æ˜¯ Stream ç±»å‹çš„ã€‚ æ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š 
	* ç­‰å¾…ç›´åˆ° stream è¿”å›ä¸€ä¸ªæ•°æ® 
	* ä½¿ç”¨ stream è¿”å›çš„å‚æ•° æ‰§è¡Œ for å¾ªç¯ä»£ç ï¼Œ 
	* é‡å¤æ‰§è¡Œ 1 å’Œ 2 ç›´åˆ° stream æ•°æ®è¿”å›å®Œæ¯•ã€‚ 
* ä½¿ç”¨ Â  break Â  æˆ–è€… Â  return Â  è¯­å¥å¯ä»¥ åœæ­¢æ¥æ”¶ stream çš„æ•°æ®ï¼Œ è¿™æ ·å°±è·³å‡ºäº† for å¾ªç¯å¹¶ä¸” ä» stream ä¸Šå–æ¶ˆæ³¨å†Œäº†ã€‚ 
* å¦‚æœå¼‚æ­¥ for å¾ªç¯ä¸èƒ½æ­£å¸¸å·¥ä½œï¼Œ ç¡®ä¿æ˜¯åœ¨ä¸€ä¸ª async æ–¹æ³•ä¸­ä½¿ç”¨ã€‚ Â  ä¾‹å¦‚ï¼Œè¦æƒ³åœ¨ Â  main() Â  æ–¹æ³•ä¸­ä½¿ç”¨å¼‚æ­¥ for å¾ªç¯ï¼Œåˆ™éœ€è¦æŠŠ Â  main() Â  æ–¹æ³•çš„å‡½æ•°ä½“æ ‡è®°ä¸º Â  async ï¼š

```dart
main() async { 
  ... 
  await for ( var request in requestServer) { 
    handleRequest(request); 
  } 
  ... 
} 
```

* å…³äºå¼‚æ­¥ç¼–ç¨‹çš„æ›´å¤šä¿¡æ¯ï¼Œå‚è€ƒ Â Dart:async ã€‚ å¦å¤–è¿˜ å¯ä»¥å‚è€ƒ Â Dart Language Asynchrony Support: Phase 1 Â  å’Œ Â Dart Language Asynchrony Support: Phase 2 ï¼Œ ä»¥åŠ Â Dart è¯­è¨€è§„èŒƒ ã€‚

### Dartçš„Commentsæ³¨é‡Š

**Dart æ”¯æŒå•è¡Œæ³¨é‡Šã€å¤šè¡Œæ³¨é‡Šå’Œ æ–‡æ¡£æ³¨é‡Šã€‚**

**Single-line comments**
* å•è¡Œæ³¨é‡Šä»¥ Â  // Â  å¼€å§‹ã€‚ Â  // Â  åé¢çš„ä¸€è¡Œå†…å®¹ ä¸º Dart ä»£ç æ³¨é‡Šã€‚ 

```dart
main() { 
  // TODO: refactor into an AbstractLlamaGreetingFactory? 
  print( 'Welcome to my Llama farm!' ); 
} 
```

**Multi-line comments**
* å¤šè¡Œæ³¨é‡Šä»¥ Â  /* Â  å¼€å§‹ï¼Œ Â  */ Â  ç»“å°¾ã€‚ å¤šè¡Œæ³¨é‡Š å¯ä»¥ åµŒå¥—ã€‚

```dart
main() { 
  /* 
   * This is a lot of work. Consider raising chickens. 

  Llama larry = new Llama(); 
  larry.feed(); 
  larry.exercise(); 
  larry.clean(); 
   */ 
} 
```

**Documentation comments**
* æ–‡æ¡£æ³¨é‡Šå¯ä»¥ä½¿ç”¨ /// å¼€å§‹ï¼Œ ä¹Ÿå¯ä»¥ä½¿ç”¨ /** å¼€å§‹ å¹¶ä»¥ */ ç»“æŸã€‚
* æ–‡æ¡£æ³¨é‡Šå¯ä»¥ä½¿ç”¨ Â  /// Â  å¼€å§‹ï¼Œ ä¹Ÿå¯ä»¥ä½¿ç”¨ Â  /** Â  å¼€å§‹ å¹¶ä»¥ */ ç»“æŸã€‚ 
* åœ¨æ–‡æ¡£æ³¨é‡Šå†…ï¼Œ Dart ç¼–è¯‘å™¨å¿½ç•¥é™¤äº†ä¸­æ‹¬å·ä»¥å¤–çš„å†…å®¹ã€‚ ä½¿ç”¨ä¸­æ‹¬å·å¯ä»¥å¼•ç”¨ classes ã€ methods ã€ fields ã€ top-level variables ã€ functions ã€ å’Œ parameters ã€‚ä¸­æ‹¬å·é‡Œé¢çš„åå­—ä½¿ç”¨ å½“å‰æ³¨é‡Šå‡ºç°åœ°æ–¹çš„è¯­æ³•èŒƒå›´æŸ¥æ‰¾å¯¹åº”çš„æˆå‘˜ã€‚ 
* ä¸‹é¢æ˜¯ä¸€ä¸ªå¼•ç”¨å…¶ä»–ç±»å’Œæˆå‘˜ çš„æ–‡æ¡£æ³¨é‡Šï¼š 

```dart
/// A domesticated South American camelid (Lama glama). 
/// 
/// Andean cultures have used llamas as meat and pack 
/// animals since pre-Hispanic times. 
class Llama { 
  String name; 

  /// Feeds your llama [Food]. 
  /// 
  /// The typical llama eats one bale of hay per week. 
  void feed( Food food) { 
    // ... 
  } 

  /// Exercises your llama with an [activity] for 
  /// [timeLimit] minutes. 
  void exercise( Activity activity, int timeLimit) { 
    // ... 
  } 
} 
```

* åœ¨ç”Ÿæˆçš„æ–‡æ¡£ä¸­ï¼Œ [Food] Â  å˜ä¸ºä¸€ä¸ªè¿æ¥ åˆ° Food ç±» API æ–‡æ¡£çš„é“¾æ¥ã€‚ 
* ä½¿ç”¨ SDK ä¸­çš„ Â æ–‡æ¡£ç”Ÿæˆå·¥å…· å¯ä»¥è§£ææ–‡æ¡£å¹¶ç”Ÿæˆ HTML ç½‘é¡µã€‚ å…³äºç”Ÿæˆçš„æ–‡æ¡£ç¤ºä¾‹ï¼Œè¯·å‚è€ƒ Â Dart API æ–‡æ¡£ã€‚ Â  å…³äºå¦‚ä½• ç»„ç»‡æ–‡æ¡£çš„å»ºè®®ï¼Œè¯·å‚è€ƒ Â Dart æ–‡æ¡£æ³¨é‡ŠæŒ‡å—ã€‚ 

### Dartçš„Important conceptsï¼ˆé‡è¦çš„æ¦‚å¿µï¼‰2019.2.13

* å¦‚æœä¸€ä¸ªæ ‡è¯†ç¬¦ä»¥ (_) å¼€å¤´ï¼Œåˆ™è¯¥æ ‡è¯†ç¬¦ åœ¨åº“å†…æ˜¯ç§æœ‰çš„ã€‚
* åœ¨å­¦ä¹  Dart çš„æ—¶å€™ï¼Œè¯·ç‰¢è®°ä¸‹é¢ä¸€äº›äº‹å®å’Œ æ¦‚å¿µ
* æ‰€æœ‰èƒ½å¤Ÿä½¿ç”¨å˜é‡å¼•ç”¨çš„éƒ½æ˜¯å¯¹è±¡ï¼Œ æ¯ä¸ªå¯¹è±¡éƒ½æ˜¯ä¸€ä¸ªç±»çš„å®ä¾‹ã€‚åœ¨ Dart ä¸­ ç”šè‡³è¿ æ•°å­—ã€æ–¹æ³•å’ŒÂ nullÂ éƒ½æ˜¯å¯¹è±¡ã€‚æ‰€æœ‰çš„å¯¹è±¡éƒ½ç»§æ‰¿äºÂ ObjectÂ ç±»ã€‚

---

* æ‰€æœ‰èƒ½å¤Ÿä½¿ç”¨å˜é‡å¼•ç”¨çš„éƒ½æ˜¯å¯¹è±¡ï¼Œ æ¯ä¸ªå¯¹è±¡éƒ½æ˜¯ä¸€ä¸ªç±»çš„å®ä¾‹ã€‚åœ¨ Dart ä¸­ ç”šè‡³è¿ æ•°å­—ã€æ–¹æ³•å’Œ Â  null Â  éƒ½æ˜¯å¯¹è±¡ã€‚æ‰€æœ‰çš„å¯¹è±¡éƒ½ç»§æ‰¿äº Â Object Â  ç±»ã€‚ 
* ä½¿ç”¨é™æ€ç±»å‹ ( ä¾‹å¦‚å‰é¢ç¤ºä¾‹ä¸­çš„ Â  num Â ) å¯ä»¥æ›´æ¸…æ™°çš„è¡¨æ˜ä½ çš„æ„å›¾ï¼Œå¹¶ä¸”å¯ä»¥è®©é™æ€åˆ†æå·¥å…·æ¥åˆ†æä½ çš„ä»£ç ï¼Œ ä½†è¿™å¹¶ä¸æ˜¯ç‰µåˆ¶æ€§çš„ã€‚ï¼ˆåœ¨è°ƒè¯•ä»£ç çš„æ—¶å€™ä½ å¯èƒ½æ³¨æ„åˆ° æ²¡æœ‰æŒ‡å®šç±»å‹çš„å˜é‡çš„ç±»å‹ä¸º Â  dynamic ã€‚ï¼‰ 
* Dart åœ¨è¿è¡Œä¹‹å‰ä¼šå…ˆè§£æä½ çš„ä»£ç ã€‚ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ ç±»å‹æˆ–è€…ç¼–è¯‘æ—¶å¸¸é‡æ¥å¸®åŠ© Dart å»æ•è·å¼‚å¸¸ä»¥åŠ è®©ä»£ç è¿è¡Œçš„æ›´é«˜æ•ˆã€‚
* Dart æ”¯æŒé¡¶çº§æ–¹æ³• ( ä¾‹å¦‚ Â  main() ) ï¼ŒåŒæ—¶è¿˜æ”¯æŒåœ¨ç±»ä¸­å®šä¹‰å‡½æ•°ã€‚ ï¼ˆé™æ€å‡½æ•°å’Œå®ä¾‹å‡½æ•°ï¼‰ã€‚ ä½ è¿˜å¯ä»¥åœ¨æ–¹æ³•ä¸­å®šä¹‰æ–¹æ³• ï¼ˆåµŒå¥—æ–¹æ³•æˆ–è€…å±€éƒ¨æ–¹æ³•ï¼‰ã€‚ 
* åŒæ ·ï¼Œ Dart è¿˜æ”¯æŒé¡¶çº§å˜é‡ï¼Œä»¥åŠ åœ¨ç±»ä¸­å®šä¹‰å˜é‡ï¼ˆé™æ€å˜é‡å’Œå®ä¾‹å˜é‡ï¼‰ã€‚ å®ä¾‹å˜é‡æœ‰æ—¶å€™è¢«ç§°ä¹‹ä¸ºåŸŸï¼ˆ Fields ï¼‰æˆ–è€…å±æ€§ï¼ˆ Properties ï¼‰ã€‚ 
* å’Œ Java ä¸åŒçš„æ˜¯ï¼Œ Dart æ²¡æœ‰ Â  public ã€ Â  protected ã€ å’Œ Â  private Â  å…³é”®å­—ã€‚å¦‚æœä¸€ä¸ªæ ‡è¯†ç¬¦ä»¥ (_) å¼€å¤´ï¼Œåˆ™è¯¥æ ‡è¯†ç¬¦ åœ¨åº“å†…æ˜¯ç§æœ‰çš„ã€‚è¯¦æƒ…è¯·å‚è€ƒï¼š Â åº“å’Œå¯è§æ€§ ã€‚ 
* æ ‡è¯†ç¬¦å¯ä»¥ä»¥å­—æ¯æˆ–è€… _ ä¸‹åˆ’çº¿å¼€å¤´ï¼Œåé¢å¯ä»¥æ˜¯ å…¶ä»–å­—ç¬¦å’Œæ•°å­—çš„ç»„åˆã€‚ 
* æœ‰æ—¶å€™ Â  è¡¨è¾¾å¼ expression Â  å’Œ Â  è¯­å¥ statement Â  æ˜¯æœ‰åŒºåˆ«çš„ï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µæˆ‘ä»¬ä¼šåˆ†åˆ«æŒ‡æ˜æ¯ç§æƒ…å†µã€‚ 
* Dart å·¥å…·å¯ä»¥æŒ‡å‡ºä¸¤ç§é—®é¢˜ï¼šè­¦å‘Šå’Œé”™è¯¯ã€‚ è­¦å‘Šåªæ˜¯è¯´ä½ çš„ä»£ç å¯èƒ½æœ‰é—®é¢˜ï¼Œ ä½†æ˜¯å¹¶ä¸ä¼šé˜»æ­¢ä½ çš„ä»£ç æ‰§è¡Œã€‚ é”™è¯¯å¯ä»¥æ˜¯ç¼–è¯‘æ—¶é”™è¯¯ä¹Ÿå¯ä»¥æ˜¯è¿è¡Œæ—¶é”™è¯¯ã€‚é‡åˆ°ç¼–è¯‘æ—¶é”™è¯¯æ—¶ï¼Œä»£ç å°† æ— æ³•æ‰§è¡Œï¼›è¿è¡Œæ—¶é”™è¯¯å°†ä¼šåœ¨è¿è¡Œä»£ç çš„æ—¶å€™å¯¼è‡´ä¸€ä¸ª Â å¼‚å¸¸ ã€‚ 

### Dartçš„HttpPackageç½‘ç»œè¯·æ±‚

```dart
dependencies:
  ...
  http: ^0.11.3+16

import 'Dart:convert';
import 'package:flutter/material.Dart';
import 'package:http/http.Dart' as http;
[...]
  loadData() async {
    String dataURL = "https://jsonplaceholder.typicode.com/posts";
    http.Response response = await http.get(dataURL);
    setState(() {
      widgets = json.decode(response.body);
    });
  }
}
```

### Dartçš„Booleansï¼ˆå¸ƒå°”å€¼ï¼‰2019.2.13

* ä¸ºäº†ä»£è¡¨å¸ƒå°”å€¼ï¼Œ Dart æœ‰ä¸€ä¸ªåå­—ä¸ºboolçš„ç±»å‹ã€‚ åªæœ‰ä¸¤ä¸ªå¯¹è±¡æ˜¯å¸ƒå°”ç±»å‹çš„ï¼š true Â  å’Œ Â  false Â  æ‰€åˆ›å»ºçš„å¯¹è±¡ï¼Œ è¿™ä¸¤ä¸ªå¯¹è±¡ä¹Ÿéƒ½æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚
* å½“ Dart éœ€è¦ä¸€ä¸ªå¸ƒå°”å€¼çš„æ—¶å€™ï¼Œåªæœ‰trueå¯¹è±¡æ‰è¢«è®¤ä¸ºæ˜¯ true ã€‚ æ‰€æœ‰å…¶ä»–çš„å€¼éƒ½æ˜¯ flase ã€‚è¿™ç‚¹å’Œ JavaScript ä¸ä¸€æ ·ï¼Œ åƒæ•°å­—1 ã€ å­—ç¬¦ä¸²"aString" ã€ ä»¥åŠsomeObjectç­‰å€¼éƒ½è¢«è®¤ä¸ºæ˜¯ false ã€‚ 
* ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç åœ¨ JavaScript å’Œ Dart ä¸­éƒ½æ˜¯åˆæ³•çš„ä»£ç ï¼š 

```dart
var name = 'Bob' ; 
if (name) { 
  // Prints in JavaScript, not in Dart. 
  print( 'You have a name!' ); 
} 
```

* å¦‚æœåœ¨ JavaScript ä¸­è¿è¡Œï¼Œåˆ™ä¼šæ‰“å°å‡º â€œYou have a name!â€ ï¼Œåœ¨ JavaScript ä¸­ Â  name Â  æ˜¯é null å¯¹è±¡æ‰€ä»¥è®¤ä¸ºæ˜¯ true ã€‚ä½†æ˜¯åœ¨ Dart çš„ç”Ÿäº§æ¨¡å¼ä¸‹è¿è¡Œï¼Œè¿™ä¸ä¼šæ‰“å°ä»»ä½•å†…å®¹ï¼ŒåŸå› æ˜¯nameè¢«è½¬æ¢ä¸º falseäº†ï¼ŒåŸå› åœ¨äºname != true ã€‚ å¦‚æœåœ¨ DartÂ  æ£€æŸ¥æ¨¡å¼è¿è¡Œï¼Œä¸Šé¢çš„ ä»£ç å°†ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œè¡¨ç¤º Â  name Â  å˜é‡ä¸æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ 
* ä¸‹é¢æ˜¯å¦å¤–ä¸€ä¸ªåœ¨ JavaScript å’Œ Dart ä¸­è¡¨ç°ä¸ä¸€è‡´çš„ç¤ºä¾‹ï¼š

```dart
if ( 1 ) { 
  print( 'JS prints this line.' ); 
} else { 
  print( 'Dart in production mode prints this line.' ); 
  // However, in checked mode, if (1) throws an 
  // exception because 1 is not boolean. 
} 
```

* æ³¨æ„ï¼šä¸Šé¢ä¸¤ä¸ªç¤ºä¾‹åªèƒ½åœ¨ Dart ç”Ÿäº§æ¨¡å¼ä¸‹è¿è¡Œï¼Œ åœ¨æ£€æŸ¥æ¨¡å¼ä¸‹ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸è¡¨æ˜å˜é‡ä¸æ˜¯æ‰€æœŸæœ›çš„å¸ƒå°”ç±»å‹ã€‚ 
* Dart è¿™æ ·è®¾è®¡å¸ƒå°”å€¼ï¼Œæ˜¯ä¸ºäº†é¿å…å¥‡æ€ªçš„è¡Œä¸ºã€‚å¾ˆå¤š JavaScriptä»£ç éƒ½é‡åˆ°è¿™ç§é—®é¢˜ã€‚ å¯¹äºä½ æ¥è¯´ï¼Œåœ¨å†™ä»£ç çš„æ—¶å€™ä½ ä¸ç”¨è¿™äº›å†™ä»£ç ï¼š ifÂ (nonbooleanValue ) ï¼Œä½ åº”è¯¥æ˜¾å¼çš„ åˆ¤æ–­å˜é‡æ˜¯å¦ä¸ºå¸ƒå°”å€¼ç±»å‹ã€‚ä¾‹å¦‚ï¼š

```dart
// Check for an empty string. 
var fullName = '' ; 
assert (fullName.isEmpty); 

// Check for zero. 
var hitPoints = 0 ; 
assert (hitPoints <= 0 ); 

// Check for null. 
var unicorn; 
assert (unicorn == null ); 

// Check for NaN. 
var iMeantToDoThis = 0 / 0 ; 
assert (iMeantToDoThis.isNaN); 
```

* å½“ Dart éœ€è¦ä¸€ä¸ªå¸ƒå°”å€¼çš„æ—¶å€™ï¼Œåªæœ‰ true å¯¹è±¡æ‰è¢«è®¤ä¸ºæ˜¯ trueã€‚ æ‰€æœ‰å…¶ä»–çš„å€¼éƒ½æ˜¯ flaseã€‚
* æ„æ€å°±æ˜¯trueæ‰è¡Œ 

----

* å¸ƒå°”ä¾‹å­

```dart
if (1) { 
  print( 'JS prints this line.' ); 
} else { 
  print( 'Dart in production mode prints this line.' ); 
  // However, in checked mode, if (1) throws an 
  // exception because 1 is not boolean. 
} 
```


###  Flutterçš„Dartè¯­è¨€ç®€ä»‹

**   Dartå’ŒJavaScriptåšä¸€ä¸ªå¯¹æ¯”**  
* å¼€å‘æ•ˆç‡é«˜
	* åŸºäºJITçš„å¿«é€Ÿå¼€å‘å‘¨æœŸï¼šFlutteråœ¨å¼€å‘é˜¶æ®µé‡‡ç”¨ï¼Œé‡‡ç”¨JITæ¨¡å¼ï¼Œè¿™æ ·å°±é¿å…äº†æ¯æ¬¡æ”¹åŠ¨éƒ½è¦è¿›è¡Œç¼–è¯‘ï¼Œæå¤§çš„èŠ‚çœäº†å¼€å‘æ—¶é—´ï¼›
	* åŸºäºAOTçš„å‘å¸ƒåŒ…: Flutteråœ¨å‘å¸ƒæ—¶å¯ä»¥é€šè¿‡AOTç”Ÿæˆé«˜æ•ˆçš„ARMä»£ç ä»¥ä¿è¯åº”ç”¨æ€§èƒ½ã€‚è€ŒJavaScriptåˆ™ä¸å…·æœ‰è¿™ä¸ªèƒ½åŠ›ã€‚
	* Dart è¿è¡Œæ—¶å’Œç¼–è¯‘å™¨æ”¯æŒ Flutter çš„ä¸¤ä¸ªå…³é”®ç‰¹æ€§çš„ç»„åˆï¼š
	* åŸºäº JIT çš„å¿«é€Ÿå¼€å‘å‘¨æœŸ ï¼š Flutter åœ¨å¼€å‘é˜¶æ®µé‡‡ç”¨ï¼Œé‡‡ç”¨ JIT æ¨¡å¼ï¼Œè¿™æ ·å°±é¿å…äº†æ¯æ¬¡æ”¹åŠ¨éƒ½è¦è¿›è¡Œç¼–è¯‘ï¼Œæå¤§çš„èŠ‚çœäº†å¼€å‘æ—¶é—´ï¼›
	* åŸºäº AOT çš„å‘å¸ƒåŒ… : Flutter åœ¨å‘å¸ƒæ—¶å¯ä»¥é€šè¿‡ AOT ç”Ÿæˆé«˜æ•ˆçš„ ARM ä»£ç ä»¥ä¿è¯åº”ç”¨æ€§èƒ½ã€‚è€Œ JavaScript åˆ™ä¸å…·æœ‰è¿™ä¸ªèƒ½åŠ›ã€‚  
* é«˜æ€§èƒ½
	* Flutter æ—¨åœ¨æä¾›æµç•…ã€é«˜ä¿çœŸçš„çš„ UI ä½“éªŒã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œ Flutter ä¸­éœ€è¦èƒ½å¤Ÿåœ¨æ¯ä¸ªåŠ¨ç”»å¸§ä¸­è¿è¡Œå¤§é‡çš„ä»£ç ã€‚è¿™æ„å‘³ç€éœ€è¦ä¸€ç§æ—¢èƒ½æä¾›é«˜æ€§èƒ½çš„è¯­è¨€ï¼Œè€Œä¸ä¼šå‡ºç°ä¼šä¸¢å¸§çš„å‘¨æœŸæ€§æš‚åœï¼Œè€Œ Dart æ”¯æŒ AOT ï¼Œåœ¨è¿™ä¸€ç‚¹ä¸Šå¯ä»¥åšçš„æ¯” JavaScript æ›´å¥½ 
* å¿«é€Ÿå†…å­˜åˆ†é…
	* Flutter æ¡†æ¶ä½¿ç”¨å‡½æ•°å¼æµï¼Œè¿™ä½¿å¾—å®ƒåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šä¾èµ–äºåº•å±‚çš„å†…å­˜åˆ†é…å™¨ã€‚å› æ­¤ï¼Œæ‹¥æœ‰ä¸€ä¸ªèƒ½å¤Ÿæœ‰æ•ˆåœ°å¤„ç†çç¢ä»»åŠ¡çš„å†…å­˜åˆ†é…å™¨å°†æ˜¾å¾—ååˆ†é‡è¦ï¼Œåœ¨ç¼ºä¹æ­¤åŠŸèƒ½çš„è¯­è¨€ä¸­ï¼Œ Flutter å°†æ— æ³•æœ‰æ•ˆåœ°å·¥ä½œã€‚å½“ç„¶ Chrome V8 çš„ JavaScript å¼•æ“åœ¨å†…å­˜åˆ†é…ä¸Šä¹Ÿå·²ç»åšçš„å¾ˆå¥½ï¼Œäº‹å®ä¸Š Dart å¼€å‘å›¢é˜Ÿçš„å¾ˆå¤šæˆå‘˜éƒ½æ˜¯æ¥è‡ª Chrome å›¢é˜Ÿçš„ï¼Œæ‰€ä»¥åœ¨å†…å­˜åˆ†é…ä¸Š Dart å¹¶ä¸èƒ½ä½œä¸ºè¶…è¶Š JavaScript çš„ä¼˜åŠ¿ï¼Œè€Œå¯¹äº Flutter æ¥è¯´ï¼Œå®ƒéœ€è¦è¿™æ ·çš„ç‰¹æ€§ï¼Œè€Œ Dart ä¹Ÿæ­£å¥½æ»¡è¶³è€Œå·²ã€‚ 
* ç±»å‹å®‰å…¨
	* ç”±äº Dart æ˜¯ç±»å‹å®‰å…¨çš„è¯­è¨€ï¼Œæ”¯æŒé™æ€ç±»å‹æ£€æµ‹ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ç¼–è¯‘å‰å‘ç°ä¸€äº›ç±»å‹çš„é”™è¯¯ï¼Œå¹¶æ’é™¤æ½œåœ¨é—®é¢˜ï¼Œè¿™ä¸€ç‚¹å¯¹äºå‰ç«¯å¼€å‘è€…æ¥è¯´å¯èƒ½ä¼šæ›´å…·æœ‰å¸å¼•åŠ›ã€‚ä¸ä¹‹ä¸åŒçš„ï¼Œ JavaScript æ˜¯ä¸€ä¸ªå¼±ç±»å‹è¯­è¨€ï¼Œä¹Ÿå› æ­¤å‰ç«¯ç¤¾åŒºå‡ºç°äº†å¾ˆå¤šç»™ JavaScript ä»£ç æ·»åŠ é™æ€ç±»å‹æ£€æµ‹çš„æ‰©å±•è¯­è¨€å’Œå·¥å…·ï¼Œå¦‚ï¼šå¾®è½¯çš„ TypeScript ä»¥åŠ Facebook çš„ Flow ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œ Dart æœ¬èº«å°±æ”¯æŒé™æ€ç±»å‹ï¼Œè¿™æ˜¯å®ƒçš„ä¸€ä¸ªé‡è¦ä¼˜åŠ¿ã€‚ 
* Dartå›¢é˜Ÿå°±åœ¨ä½ èº«è¾¹
	* çœ‹ä¼¼ä¸èµ·çœ¼ï¼Œå®åˆ™ä¸¾è¶³è½»é‡ã€‚ç”±äºæœ‰ Dart å›¢é˜Ÿçš„ç§¯ææŠ•å…¥ï¼Œ Flutter å›¢é˜Ÿå¯ä»¥è·å¾—æ›´å¤šã€æ›´æ–¹ä¾¿çš„æ”¯æŒï¼Œæ­£å¦‚ Flutter å®˜ç½‘æ‰€è¿° â€œ æˆ‘ä»¬æ­£ä¸ Dart ç¤¾åŒºè¿›è¡Œå¯†åˆ‡åˆä½œï¼Œä»¥æ”¹è¿› Dart åœ¨ Flutter ä¸­çš„ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬æœ€åˆé‡‡ç”¨ Dart æ—¶ï¼Œè¯¥è¯­è¨€å¹¶æ²¡æœ‰æä¾›ç”ŸæˆåŸç”ŸäºŒè¿›åˆ¶æ–‡ä»¶çš„å·¥å…·é“¾ï¼ˆè¿™å¯¹äºå®ç°å¯é¢„æµ‹çš„é«˜æ€§èƒ½å…·æœ‰å¾ˆå¤§çš„å¸®åŠ©ï¼‰ï¼Œä½†æ˜¯ç°åœ¨å®ƒå®ç°äº†ï¼Œå› ä¸º Dart å›¢é˜Ÿä¸“é—¨ä¸º Flutter æ„å»ºäº†å®ƒã€‚åŒæ ·ï¼Œ Dart VM ä¹‹å‰å·²ç»é’ˆå¯¹ååé‡è¿›è¡Œäº†ä¼˜åŒ–ï¼Œä½†å›¢é˜Ÿç°åœ¨æ­£åœ¨ä¼˜åŒ– VM çš„å»¶è¿Ÿæ—¶é—´ï¼Œè¿™å¯¹äº Flutter çš„å·¥ä½œè´Ÿè½½æ›´ä¸ºé‡è¦ã€‚ â€ 

* JavaScript çš„å¼±ç±»å‹ä¸€ç›´è¢«æŠ“çŸ­ï¼Œæ‰€ä»¥ TypeScript ã€ Coffeescript ç”šè‡³æ˜¯ Facebook çš„ flow ï¼ˆè™½ç„¶å¹¶ä¸èƒ½ç®— JavaScript çš„ä¸€ä¸ªè¶…é›†ï¼Œä½†ä¹Ÿé€šè¿‡æ ‡æ³¨å’Œæ‰“åŒ…å·¥å…·æä¾›äº†é™æ€ç±»å‹æ£€æŸ¥ï¼‰æ‰æœ‰å¸‚åœºã€‚å°±ç¬”è€…ä½¿ç”¨è¿‡çš„è„šæœ¬è¯­è¨€ä¸­ï¼ˆç¬”è€…æ›¾ä½¿ç”¨è¿‡ Python ã€ PHP ï¼‰ï¼Œ JavaScript æ— ç–‘æ˜¯åŠ¨æ€åŒ– æ”¯æŒæœ€å¥½çš„è„šæœ¬è¯­è¨€ï¼Œæ¯”å¦‚åœ¨ JavaScript ä¸­ï¼Œå¯ä»¥ç»™ä»»ä½•å¯¹è±¡åœ¨ä»»ä½•æ—¶å€™åŠ¨æ€æ‰©å±•å±æ€§ï¼Œå¯¹äºç²¾é€š JavaScript çš„é«˜æ‰‹æ¥è¯´ï¼Œè¿™æ— ç–‘æ˜¯ä¸€æŠŠåˆ©å‰‘ã€‚ä½†æ˜¯ï¼Œä»»ä½•äº‹ç‰©éƒ½æœ‰ä¸¤é¢æ€§ï¼Œ JavaScript çš„å¼ºå¤§çš„åŠ¨æ€åŒ–ç‰¹æ€§ä¹Ÿæ˜¯æŠŠåŒåˆƒå‰‘ï¼Œä½ å¯ç»å¸¸å¬åˆ°å¦ä¸€ä¸ªå£°éŸ³ï¼Œè®¤ä¸º JavaScript çš„è¿™ç§åŠ¨æ€æ€§ç³Ÿç³•é€äº†ï¼Œå¤ªè¿‡çµæ´»åè€Œå¯¼è‡´ä»£ç å¾ˆéš¾é¢„æœŸï¼Œæ— æ³•é™åˆ¶ä¸è¢«æœŸæœ›çš„ä¿®æ”¹ã€‚æ¯•ç«Ÿæœ‰äº›äººæ€»æ˜¯å¯¹è‡ªå·±æˆ–åˆ«äººå†™çš„ä»£ç ä¸æ”¾å¿ƒï¼Œä»–ä»¬å¸Œæœ›èƒ½å¤Ÿè®©ä»£ç å˜å¾—å¯æ§ï¼Œå¹¶æœŸæœ›æœ‰ä¸€å¥—é™æ€ç±»å‹æ£€æŸ¥ç³»ç»Ÿæ¥å¸®åŠ©è‡ªå·±å‡å°‘é”™è¯¯ã€‚æ­£å› å¦‚æ­¤ï¼Œåœ¨ Flutter ä¸­ï¼Œ Dart å‡ ä¹æ”¾å¼ƒäº†è„šæœ¬è¯­è¨€åŠ¨æ€åŒ–çš„ç‰¹æ€§ï¼Œå¦‚ä¸æ”¯æŒåå°„ã€ä¹Ÿä¸æ”¯æŒåŠ¨æ€åˆ›å»ºå‡½æ•°ç­‰ã€‚å¹¶ä¸” Dart åœ¨ 2.0 å¼ºåˆ¶å¼€å¯äº†ç±»å‹æ£€æŸ¥ï¼ˆ Strong Mode ï¼‰ï¼ŒåŸå…ˆçš„æ£€æŸ¥æ¨¡å¼ï¼ˆ checked mode ï¼‰å’Œå¯é€‰ç±»å‹ï¼ˆ optional type ï¼‰å°†æ·¡å‡ºï¼Œæ‰€ä»¥åœ¨ç±»å‹å®‰å…¨è¿™ä¸ªå±‚é¢æ¥è¯´ï¼Œ Dart å’Œ TypeScript ã€ Coffeescript æ˜¯å·®ä¸å¤šçš„ï¼Œæ‰€ä»¥å•ä»è¿™ä¸€ç‚¹æ¥çœ‹ï¼Œ Dart å¹¶ä¸å…·å¤‡ä»€ä¹ˆæ˜æ˜¾ä¼˜åŠ¿ï¼Œä½†ç»¼åˆèµ·æ¥çœ‹ï¼Œ Dart æ—¢èƒ½è¿›è¡ŒæœåŠ¡ç«¯è„šæœ¬ã€ APP å¼€å‘ã€ web å¼€å‘ï¼Œè¿™å°±æœ‰ä¼˜åŠ¿äº†ï¼ 
* ç»¼ä¸Šæ‰€è¿°ï¼Œç¬”è€…è¿˜æ˜¯å¾ˆçœ‹å¥½ Dart è¯­è¨€çš„å°†æ¥ï¼Œä¹‹æ‰€ä»¥è¡¨è¿™ä¸ªæ€ï¼Œæ˜¯å› ä¸ºåœ¨æ–°æŠ€æœ¯å‘å±•åˆæœŸï¼Œå¾ˆå¤šäººå¯èƒ½è¿˜æœ‰æ‰€æ‘‡æ‘†ï¼Œæœ‰æ‰€çŠ¹è±«ï¼Œæ‰€ä»¥æœ‰å¿…è¦ç»™å¤§å®¶æ‰“ä¸€å‰‚å¼ºå¿ƒé’ˆï¼Œå½“ç„¶ï¼Œè¿™æ˜¯ä¸€ä¸ªè§ä»è§æ™ºçš„é—®é¢˜ï¼Œå¤§å®¶å¯ä»¥å„æŠ’å·±è§ã€‚ 

**   Dartåœ¨é™æ€è¯­æ³•æ–¹é¢å’ŒJavaéå¸¸ç›¸ä¼¼**  

* Dart vs Java
* å®¢è§‚çš„æ¥è®²ï¼Œ Dart åœ¨è¯­æ³•å±‚é¢ç¡®å®æ¯” Java æ›´æœ‰è¡¨ç°åŠ›ï¼›åœ¨ VM å±‚é¢ï¼Œ Dart VM åœ¨å†…å­˜å›æ”¶å’Œååé‡éƒ½è¿›è¡Œäº†åå¤çš„ä¼˜åŒ–ï¼Œä½†å…·ä½“çš„æ€§èƒ½å¯¹æ¯”ï¼Œç¬”è€…æ²¡æœ‰æ‰¾åˆ°ç›¸å…³æµ‹è¯•æ•°æ®ï¼Œä½†åœ¨ç¬”è€…çœ‹æ¥ï¼Œåªè¦ Dart è¯­è¨€èƒ½æµè¡Œï¼Œ VM çš„æ€§èƒ½å°±ä¸ç”¨æ‹…å¿ƒï¼Œæ¯•ç«Ÿ Google åœ¨ go ï¼ˆæ²¡ç”¨ vm ä½†æœ‰ GC ï¼‰ã€ javascript ï¼ˆ v8 ï¼‰ã€ dalvik ï¼ˆ android ä¸Šçš„ java vm ï¼‰ä¸Šå·²ç»æœ‰äº†å¾ˆå¤šæŠ€æœ¯ç§¯æ·€ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ Dart åœ¨ Flutter ä¸­å·²ç»å¯ä»¥å°† GC åšåˆ° 10ms ä»¥å†…ï¼Œæ‰€ä»¥ Dart å’Œ Java ç›¸æ¯”ï¼Œå†³èƒœå› ç´ å¹¶ä¸ä¼šæ˜¯åœ¨æ€§èƒ½æ–¹é¢ã€‚è€Œåœ¨è¯­æ³•å±‚é¢ï¼Œ Dart è¦æ¯” java æ›´æœ‰è¡¨ç°åŠ›ï¼Œæœ€é‡è¦çš„æ˜¯ Dart å¯¹å‡½æ•°å¼ç¼–ç¨‹æ”¯æŒè¦è¿œå¼ºäº Java( ç›®å‰åªåœç•™åœ¨ lamda è¡¨è¾¾å¼ ) ï¼Œè€Œ Dart ç›®å‰çœŸæ­£çš„ä¸è¶³æ˜¯ç”Ÿæ€ ï¼Œä½†ç¬”è€…ç›¸ä¿¡ï¼Œéšç€ Flutter çš„é€æ¸ç«çƒ­ï¼Œä¼šå›è¿‡å¤´æ¥åæ¨ Dart ç”Ÿæ€åŠ é€Ÿå‘å±•ï¼Œå¯¹äº Dart æ¥è¯´ï¼Œç°åœ¨éœ€è¦çš„æ˜¯æ—¶é—´ã€‚ 

**   å˜é‡å£°æ˜**  

* var
	
```

// ç±»ä¼¼äº JavaScript ä¸­çš„ var ï¼Œå®ƒå¯ä»¥æ¥æ”¶ä»»ä½•ç±»å‹çš„å˜é‡ï¼Œä½†æœ€å¤§çš„ä¸åŒæ˜¯ Dart ä¸­ var å˜é‡ä¸€æ—¦èµ‹å€¼ï¼Œç±»å‹ä¾¿ä¼šç¡®å®šï¼Œåˆ™ä¸èƒ½å†æ”¹å˜å…¶ç±»å‹ï¼Œå¦‚ï¼š 
var t ; 
t = "hi world" ; 

// ä¸‹é¢ä»£ç åœ¨ Dart ä¸­ä¼šæŠ¥é”™ï¼Œå› ä¸ºå˜é‡ t çš„ç±»å‹å·²ç»ç¡®å®šä¸º String ï¼Œ 
// ç±»å‹ä¸€æ—¦ç¡®å®šååˆ™ä¸èƒ½å†æ›´æ”¹å…¶ç±»å‹ã€‚ 
t = 1000 ; 

// ä¸Šé¢çš„ä»£ç åœ¨ JavaScript æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå‰ç«¯å¼€å‘è€…éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œä¹‹æ‰€ä»¥æœ‰æ­¤å·®å¼‚æ˜¯å› ä¸º Dart æœ¬èº«æ˜¯ä¸€ä¸ªå¼ºç±»å‹è¯­è¨€ï¼Œä»»ä½•å˜é‡éƒ½æ˜¯æœ‰ç¡®å®šç±»å‹çš„ï¼Œåœ¨ Dart ä¸­ï¼Œå½“ç”¨ var å£°æ˜ä¸€ä¸ªå˜é‡åï¼Œ Dart åœ¨ç¼–è¯‘æ—¶ä¼šæ ¹æ®ç¬¬ä¸€æ¬¡èµ‹å€¼æ•°æ®çš„ç±»å‹æ¥æ¨æ–­å…¶ç±»å‹ï¼Œç¼–è¯‘ç»“æŸåå…¶ç±»å‹å°±å·²ç»è¢«ç¡®å®šï¼Œè€Œ JavaScript æ˜¯çº¯ç²¹çš„å¼±ç±»å‹è„šæœ¬è¯­è¨€ï¼Œ var åªæ˜¯å˜é‡çš„å£°æ˜æ–¹å¼è€Œå·²ã€‚ 

```


* dynamicå’ŒObject
	
	
```

Dynamic å’Œ Object Â  ä¸ Â  var åŠŸèƒ½ç›¸ä¼¼ï¼Œéƒ½ä¼šåœ¨èµ‹å€¼æ—¶è‡ªåŠ¨è¿›è¡Œç±»å‹æ¨æ–­ï¼Œä¸åŒåœ¨äºï¼Œèµ‹å€¼åå¯ä»¥æ”¹å˜å…¶ç±»å‹ï¼Œå¦‚ï¼š 
dynamic t ; 
t = "hi world" ; 
// ä¸‹é¢ä»£ç æ²¡æœ‰é—®é¢˜ 
t = 1000 ; 
Object Â  æ˜¯ Dart æ‰€æœ‰å¯¹è±¡çš„æ ¹åŸºç±»ï¼Œä¹Ÿå°±æ˜¯è¯´æ‰€æœ‰ç±»å‹éƒ½æ˜¯ Object çš„å­ç±»ï¼Œæ‰€ä»¥ä»»ä½•ç±»å‹çš„æ•°æ®éƒ½å¯ä»¥èµ‹å€¼ç»™ Object å£°æ˜çš„å¯¹è±¡ï¼Œæ‰€ä»¥è¡¨ç°æ•ˆæœå’Œ dynamic ç›¸ä¼¼ã€‚

```

* inalå’Œconst
	
```

// å¦‚æœæ‚¨ä»æœªæ‰“ç®—æ›´æ”¹ä¸€ä¸ªå˜é‡ï¼Œé‚£ä¹ˆä½¿ç”¨ Â  final Â  æˆ– Â  const ï¼Œä¸æ˜¯ var ï¼Œä¹Ÿä¸æ˜¯ä¸€ä¸ªç±»å‹ã€‚ ä¸€ä¸ª Â  final å˜é‡åªèƒ½è¢«è®¾ç½®ä¸€æ¬¡ï¼Œä¸¤è€…åŒºåˆ«åœ¨äºï¼š const Â  // å˜é‡æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶å¸¸é‡ï¼Œ final å˜é‡åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶è¢«åˆå§‹åŒ–ã€‚è¢« final æˆ–è€… const ä¿®é¥°çš„å˜é‡ï¼Œå˜é‡ç±»å‹å¯ä»¥çœç•¥ï¼Œå¦‚ï¼š 

// å¯ä»¥çœç•¥ String è¿™ä¸ªç±»å‹å£°æ˜ 
final str = "hi world" ; 

//final String str = "hi world";  
const str1 = "hi world" ; 

//const String str1 = "hi world"; 

```

**   å‡½æ•°**  
* Dart æ˜¯ä¸€ç§çœŸæ­£çš„é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œæ‰€ä»¥å³ä½¿æ˜¯å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªç±»å‹ Function ã€‚è¿™æ„å‘³ç€å‡½æ•°å¯ä»¥èµ‹å€¼ç»™å˜é‡æˆ–ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°ï¼Œè¿™æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„å…¸å‹ç‰¹å¾ã€‚ 

* å‡½æ•°å£°æ˜


```

bool isNoble ( int atomicNumber ) { 
  return _nobleGases [ atomicNumber ] != null ; 
} 
Dart å‡½æ•°å£°æ˜å¦‚æœæ²¡æœ‰æ˜¾å¼å£°æ˜è¿”å›å€¼ç±»å‹æ—¶ä¼šé»˜è®¤å½“åš dynamic å¤„ç†ï¼Œæ³¨æ„ï¼Œå‡½æ•°è¿”å›å€¼æ²¡æœ‰ç±»å‹æ¨æ–­ï¼š 
typedef bool CALLBACK (); 

// ä¸æŒ‡å®šè¿”å›ç±»å‹ï¼Œæ­¤æ—¶é»˜è®¤ä¸º dynamic ï¼Œä¸æ˜¯ bool 
isNoble ( int atomicNumber ) { 
  return _nobleGases [ atomicNumber ] != null ; 
} 

void test ( CALLBACK cb ){ 
   print ( cb ());   
} 
// æŠ¥é”™ï¼Œ isNoble ä¸æ˜¯ bool ç±»å‹ 
test ( isNoble ); 

```

* å¯¹äºåªåŒ…å«ä¸€ä¸ªè¡¨è¾¾å¼çš„å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨ç®€å†™è¯­æ³•

```

bool isNoble ï¼ˆ int atomicNumber ï¼‰ => _nobleGases [ atomicNumber ] ï¼ = null ; 

```

* å‡½æ•°ä½œä¸ºå˜é‡

```

var say = ( str ){ 
  print ( str ); 
}; 
say ( "hi world" ); 

```

* å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’

```

void execute ( var callback ){ 
    callback (); 
} 
execute (() => print ( "xxx" )) 

```

* å¯é€‰çš„ä½ç½®å‚æ•°

```

// åŒ…è£…ä¸€ç»„å‡½æ•°å‚æ•°ï¼Œç”¨ [] æ ‡è®°ä¸ºå¯é€‰çš„ä½ç½®å‚æ•°ï¼š 
String say ( String from , String msg , [ String device ]) { 
  var result = '$from says $msg' ; 
  if ( device != null ) { 
    result = '$result with a $device' ; 
  } 
  return result ; 
} 
// ä¸‹é¢æ˜¯ä¸€ä¸ªä¸å¸¦å¯é€‰å‚æ•°è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„ä¾‹å­ï¼š 
say ( 'Bob' , 'Howdy' ); // ç»“æœæ˜¯ï¼š Bob says Howdy 

// ä¸‹é¢æ˜¯ç”¨ç¬¬ä¸‰ä¸ªå‚æ•°è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„ä¾‹å­ï¼š 
say ( 'Bob' , 'Howdy' , 'smoke signal' ); // ç»“æœæ˜¯ï¼š Bob says Howdy with a smoke signal 

```

* å¯é€‰çš„å‘½åå‚æ•°
  
```

å®šä¹‰å‡½æ•°æ—¶ï¼Œä½¿ç”¨ {param1, param2, â€¦} ï¼Œç”¨äºæŒ‡å®šå‘½åå‚æ•°ã€‚ä¾‹å¦‚ï¼š 
// è®¾ç½® [bold] å’Œ [hidden] æ ‡å¿— 
void enableFlags ({ bool bold , bool hidden }) { 
    // ...  
} 
è°ƒç”¨å‡½æ•°æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æŒ‡å®šå‘½åå‚æ•°ã€‚ä¾‹å¦‚ï¼š paramName: value 
enableFlags ( bold : true , hidden : false ); 
å¯é€‰å‘½åå‚æ•°åœ¨ Flutter ä¸­ä½¿ç”¨éå¸¸å¤šã€‚   

```

**   Stream**  

* Stream Â  ä¹Ÿæ˜¯ç”¨äºæ¥æ”¶å¼‚æ­¥äº‹ä»¶æ•°æ®ï¼Œå’Œ Future Â  ä¸åŒçš„æ˜¯ï¼Œå®ƒå¯ä»¥æ¥æ”¶å¤šä¸ªå¼‚æ­¥æ“ä½œçš„ç»“æœï¼ˆæˆåŠŸæˆ–å¤±è´¥ï¼‰ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡æ—¶ï¼Œå¯ä»¥é€šè¿‡å¤šæ¬¡è§¦å‘æˆåŠŸæˆ–å¤±è´¥äº‹ä»¶æ¥ä¼ é€’ç»“æœæ•°æ®æˆ–é”™è¯¯å¼‚å¸¸ã€‚ Â  Stream Â  å¸¸ç”¨äºä¼šå¤šæ¬¡è¯»å–æ•°æ®çš„å¼‚æ­¥ä»»åŠ¡åœºæ™¯ï¼Œå¦‚ç½‘ç»œå†…å®¹ä¸‹è½½ã€æ–‡ä»¶è¯»å†™ç­‰ã€‚ä¸¾ä¸ªä¾‹å­ï¼š 

```

Stream . fromFutures ([ 
  // 1 ç§’åè¿”å›ç»“æœ 
  Future . delayed ( new Duration ( seconds : 1 ), () { 
    return "hello 1" ; 
  }), 
  // æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ 
  Future . delayed ( new Duration ( seconds : 2 ),(){ 
    throw AssertionError ( "Error" ); 
  }), 
  // 3 ç§’åè¿”å›ç»“æœ 
  Future . delayed ( new Duration ( seconds : 3 ), () { 
    return "hello 3" ; 
  }) 
]). listen (( data ){ 
   print ( data ); 
}, onError : ( e ){ 
   print ( e . message ); 
}, onDone : (){ 

}); 

ä¸Šé¢çš„ä»£ç ä¾æ¬¡ä¼šè¾“å‡ºï¼š 
I/flutter (17666): hello 1 
I/flutter (17666): Error 
I/flutter (17666): hello 3 

```

* ä»£ç å¾ˆç®€å•ï¼Œå°±ä¸èµ˜è¿°äº†ã€‚ 
* æ€è€ƒé¢˜ï¼šæ—¢ç„¶ Stream å¯ä»¥æ¥æ”¶å¤šæ¬¡äº‹ä»¶ï¼Œé‚£èƒ½ä¸èƒ½ç”¨ Stream æ¥å®ç°ä¸€ä¸ªè®¢é˜…è€…æ¨¡å¼çš„äº‹ä»¶æ€»çº¿ï¼Ÿ 


**   Async/await**  

* Dart ä¸­çš„ async/await Â  å’Œ JavaScript ä¸­çš„ async/await åŠŸèƒ½å’Œç”¨æ³•æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œå¦‚æœä½ å·²ç»äº†è§£ JavaScript ä¸­çš„ async/await çš„ç”¨æ³•ï¼Œå¯ä»¥ç›´æ¥è·³è¿‡æœ¬èŠ‚ã€‚ 
* å›è°ƒåœ°ç‹± (Callback hell) 
* å¦‚æœä»£ç ä¸­æœ‰å¤§é‡å¼‚æ­¥é€»è¾‘ï¼Œå¹¶ä¸”å‡ºç°å¤§é‡å¼‚æ­¥ä»»åŠ¡ä¾èµ–å…¶å®ƒå¼‚æ­¥ä»»åŠ¡çš„ç»“æœæ—¶ï¼Œå¿…ç„¶ä¼šå‡ºç° Future.then å›è°ƒä¸­å¥—å›è°ƒæƒ…å†µã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ç°åœ¨æœ‰ä¸ªéœ€æ±‚åœºæ™¯æ˜¯ç”¨æˆ·å…ˆç™»å½•ï¼Œç™»å½•æˆåŠŸåä¼šè·å¾—ç”¨æˆ· Id ï¼Œç„¶åé€šè¿‡ç”¨æˆ· Id ï¼Œå†å»è¯·æ±‚ç”¨æˆ·ä¸ªäººä¿¡æ¯ï¼Œè·å–åˆ°ç”¨æˆ·ä¸ªäººä¿¡æ¯åï¼Œä¸ºäº†ä½¿ç”¨æ–¹ä¾¿ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶ç¼“å­˜åœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œä»£ç å¦‚ä¸‹ï¼š 


```

// å…ˆåˆ†åˆ«å®šä¹‰å„ä¸ªå¼‚æ­¥ä»»åŠ¡ 
Future < String > login ( String userName , String pwd ){ 
    ... 
    // ç”¨æˆ·ç™»å½• 
}; 
Future < String > getUserInfo ( String id ){ 
    ... 
    // è·å–ç”¨æˆ·ä¿¡æ¯   
}; 
Future saveUserInfo ( String userInfo ){ 
    ... 
    // ä¿å­˜ç”¨æˆ·ä¿¡æ¯   
}; 
æ¥ä¸‹æ¥ï¼Œæ‰§è¡Œæ•´ä¸ªä»»åŠ¡æµï¼š 
login ( "alice" , "******" ). then (( id ){ 
  // ç™»å½•æˆåŠŸåé€šè¿‡ï¼Œ id è·å–ç”¨æˆ·ä¿¡æ¯     
  getUserInfo ( id ). then (( userInfo ){ 
    // è·å–ç”¨æˆ·ä¿¡æ¯åä¿å­˜   
    saveUserInfo ( userInfo ). then ((){ 
       // ä¿å­˜ç”¨æˆ·ä¿¡æ¯ï¼Œæ¥ä¸‹æ¥æ‰§è¡Œå…¶å®ƒæ“ä½œ 
        ... 
    }); 
  }); 
}) 

```

* å¯ä»¥æ„Ÿå—ä¸€ä¸‹ï¼Œå¦‚æœä¸šåŠ¡é€»è¾‘ä¸­æœ‰å¤§é‡å¼‚æ­¥ä¾èµ–çš„æƒ…å†µï¼Œå°†ä¼šå‡ºç°ä¸Šé¢è¿™ç§åœ¨å›è°ƒé‡Œé¢å¥—å›è°ƒçš„æƒ…å†µï¼Œè¿‡å¤šçš„åµŒå¥—ä¼šå¯¼è‡´çš„ä»£ç å¯è¯»æ€§ä¸‹é™ä»¥åŠå‡ºé”™ç‡æé«˜ï¼Œå¹¶ä¸”éå¸¸éš¾ç»´æŠ¤ï¼Œè¿™ä¸ªé—®é¢˜è¢«å½¢è±¡çš„ç§°ä¸ºå›è°ƒåœ°ç‹±ï¼ˆ Callback hell ï¼‰ ã€‚å›è°ƒåœ°ç‹±é—®é¢˜åœ¨ä¹‹å‰ JavaScript ä¸­éå¸¸çªå‡ºï¼Œä¹Ÿæ˜¯ JavaScript è¢«åæ§½æœ€å¤šçš„ç‚¹ï¼Œä½†éšç€ ECMAScript6 å’Œ ECMAScript7 æ ‡å‡†å‘å¸ƒåï¼Œè¿™ä¸ªé—®é¢˜å¾—åˆ°äº†éå¸¸å¥½çš„è§£å†³ï¼Œè€Œè§£å†³å›è°ƒåœ°ç‹±çš„ä¸¤å¤§ç¥å™¨æ­£æ˜¯ ECMAScript6 å¼•å…¥äº† Promise ï¼Œä»¥åŠ ECMAScript7 ä¸­å¼•å…¥çš„ async/await ã€‚ è€Œåœ¨ Dart ä¸­å‡ ä¹æ˜¯å®Œå…¨å¹³ç§»äº† JavaScript ä¸­çš„è¿™ä¸¤è€…ï¼š Future ç›¸å½“äº Promise ï¼Œè€Œ async/await è¿åå­—éƒ½æ²¡æ”¹ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹é€šè¿‡ Future å’Œ async/await å¦‚ä½•æ¶ˆé™¤ä¸Šé¢ç¤ºä¾‹ä¸­çš„åµŒå¥—é—®é¢˜ã€‚ 
* ä½¿ç”¨ Future æ¶ˆé™¤ callback hell 

```

login ( "alice" , "******" ). then (( id ){ 
      return getUserInfo ( id ); 
}). then (( userInfo ){ 
    return saveUserInfo ( userInfo ); 
}). then (( e ){ 
   // æ‰§è¡Œæ¥ä¸‹æ¥çš„æ“ä½œ   
}). catchError (( e ){ 
  // é”™è¯¯å¤„ç†   
  print ( e ); 
}); 

```

* æ­£å¦‚ä¸Šæ–‡æ‰€è¿°ï¼Œ Â â€œ Future Â  çš„æ‰€æœ‰ API çš„è¿”å›å€¼ä»ç„¶æ˜¯ä¸€ä¸ª Future å¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿›è¡Œé“¾å¼è°ƒç”¨ â€ Â  ï¼Œå¦‚æœåœ¨ then ä¸­è¿”å›çš„æ˜¯ä¸€ä¸ª Future çš„è¯ï¼Œè¯¥ future ä¼šæ‰§è¡Œï¼Œæ‰§è¡Œç»“æŸåä¼šè§¦å‘åé¢çš„ then å›è°ƒï¼Œè¿™æ ·ä¾æ¬¡å‘ä¸‹ï¼Œå°±é¿å…äº†å±‚å±‚åµŒå¥—ã€‚ 
* ä½¿ç”¨ async/await æ¶ˆé™¤ callback hell 
* é€šè¿‡ Future å›è°ƒä¸­å†è¿”å› Future çš„æ–¹å¼è™½ç„¶èƒ½é¿å…å±‚å±‚åµŒå¥—ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰ä¸€å±‚å›è°ƒï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ–¹å¼èƒ½å¤Ÿè®©æˆ‘ä»¬å¯ä»¥åƒå†™åŒæ­¥ä»£ç é‚£æ ·æ¥æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡è€Œä¸ä½¿ç”¨å›è°ƒçš„æ–¹å¼ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œè¿™å°±è¦ä½¿ç”¨ async/await äº†ï¼Œä¸‹é¢æˆ‘ä»¬å…ˆç›´æ¥çœ‹ä»£ç ï¼Œç„¶åå†è§£é‡Šï¼Œä»£ç å¦‚ä¸‹ï¼š 

```

task () async { 
   try { 
    String id = await login ( "alice" , "******" ); 
    String userInfo = await getUserInfo ( id ); 
    await saveUserInfo ( userInfo ); 
    // æ‰§è¡Œæ¥ä¸‹æ¥çš„æ“ä½œ     
   } catch ( e ){ 
    // é”™è¯¯å¤„ç†     
    print ( e );     
   }   
} 

```

* async ç”¨æ¥è¡¨ç¤ºå‡½æ•°æ˜¯å¼‚æ­¥çš„ï¼Œå®šä¹‰çš„å‡½æ•°ä¼šè¿”å›ä¸€ä¸ª Future å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ then æ–¹æ³•æ·»åŠ å›è°ƒå‡½æ•°ã€‚ 
* await Â  åé¢æ˜¯ä¸€ä¸ª Future ï¼Œè¡¨ç¤ºç­‰å¾…è¯¥å¼‚æ­¥ä»»åŠ¡å®Œæˆï¼Œå¼‚æ­¥å®Œæˆåæ‰ä¼šå¾€ä¸‹èµ°ï¼› await å¿…é¡»å‡ºç°åœ¨ Â  async Â  å‡½æ•°å†…éƒ¨ã€‚ 
* å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬é€šè¿‡ async/await å°†ä¸€ä¸ªå¼‚æ­¥æµç”¨åŒæ­¥çš„ä»£ç è¡¨ç¤ºå‡ºæ¥äº†ã€‚ 
* å…¶å®ï¼Œæ— è®ºæ˜¯åœ¨ JavaScript è¿˜æ˜¯ Dart ä¸­ï¼Œ async/await éƒ½åªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œç¼–è¯‘å™¨æˆ–è§£é‡Šå™¨æœ€ç»ˆéƒ½ä¼šå°†å…¶è½¬åŒ–ä¸ºä¸€ä¸ª Promise ï¼ˆ Future ï¼‰çš„è°ƒç”¨é“¾ã€‚ 


**  å¼‚æ­¥æ”¯æŒ**  

* Dart ç±»åº“æœ‰éå¸¸å¤šçš„è¿”å› Future æˆ–è€… Stream å¯¹è±¡çš„å‡½æ•°ã€‚ è¿™äº›å‡½æ•°è¢«ç§°ä¸ºå¼‚æ­¥å‡½æ•° ï¼šå®ƒä»¬åªä¼šåœ¨è®¾ç½®å¥½ä¸€äº›è€—æ—¶æ“ä½œä¹‹åè¿”å›ï¼Œæ¯”å¦‚åƒ IO æ“ä½œã€‚è€Œä¸æ˜¯ç­‰åˆ°è¿™ä¸ªæ“ä½œå®Œæˆã€‚ 
* async å’Œ await å…³é”®è¯æ”¯æŒäº†å¼‚æ­¥ç¼–ç¨‹ï¼Œè¿è¡Œæ‚¨å†™å‡ºå’ŒåŒæ­¥ä»£ç å¾ˆåƒçš„å¼‚æ­¥ä»£ç ã€‚ 

**   Future**  
* Future ä¸ JavaScript ä¸­çš„ Promise éå¸¸ç›¸ä¼¼ï¼Œè¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå®Œæˆï¼ˆæˆ–å¤±è´¥ï¼‰åŠå…¶ç»“æœå€¼çš„è¡¨ç¤ºã€‚ç®€å•æ¥è¯´ï¼Œå®ƒå°±æ˜¯ç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œçš„ï¼Œå¼‚æ­¥å¤„ç†æˆåŠŸäº†å°±æ‰§è¡ŒæˆåŠŸçš„æ“ä½œï¼Œå¼‚æ­¥å¤„ç†å¤±è´¥äº†å°±æ•è·é”™è¯¯æˆ–è€…åœæ­¢åç»­æ“ä½œã€‚ä¸€ä¸ª Future åªä¼šå¯¹åº”ä¸€ä¸ªç»“æœï¼Œè¦ä¹ˆæˆåŠŸï¼Œè¦ä¹ˆå¤±è´¥ã€‚ 
* ç”±äºæœ¬èº«åŠŸèƒ½è¾ƒå¤šï¼Œè¿™é‡Œæˆ‘ä»¬åªä»‹ç»å…¶å¸¸ç”¨çš„ API åŠç‰¹æ€§ã€‚è¿˜æœ‰ï¼Œè¯·è®°ä½ï¼Œ Future Â  çš„æ‰€æœ‰ API çš„è¿”å›å€¼ä»ç„¶æ˜¯ä¸€ä¸ª Future å¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿›è¡Œé“¾å¼è°ƒç”¨ã€‚ 

**   Future.then**  

* ä¸ºäº†æ–¹ä¾¿ç¤ºä¾‹ï¼Œåœ¨æœ¬ä¾‹ä¸­æˆ‘ä»¬ä½¿ç”¨ Future.delayed Â  åˆ›å»ºäº†ä¸€ä¸ªå»¶æ—¶ä»»åŠ¡ï¼ˆå®é™…åœºæ™¯ä¼šæ˜¯ä¸€ä¸ªçœŸæ­£çš„è€—æ—¶ä»»åŠ¡ï¼Œæ¯”å¦‚ä¸€æ¬¡ç½‘ç»œè¯·æ±‚ï¼‰ï¼Œå³ 2 ç§’åè¿”å›ç»“æœå­—ç¬¦ä¸² "hi world!" ï¼Œç„¶åæˆ‘ä»¬åœ¨ then ä¸­æ¥æ”¶å¼‚æ­¥ç»“æœå¹¶æ‰“å°ç»“æœï¼Œä»£ç å¦‚ä¸‹ï¼š 


```

Future . delayed ( new Duration ( seconds : 2 ),(){ 
   return "hi world!" ; 
}). then (( data ){ 
   print ( data ); 
}); 


```

**  Future.catchError**  

* å¦‚æœå¼‚æ­¥ä»»åŠ¡å‘ç”Ÿé”™è¯¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ catchError ä¸­æ•è·é”™è¯¯ï¼Œæˆ‘ä»¬å°†ä¸Šé¢ç¤ºä¾‹æ”¹ä¸ºï¼š 

```

Future . delayed ( new Duration ( seconds : 2 ),(){ 
   //return "hi world!"; 
   throw AssertionError ( "Error" );   
}). then (( data ){ 
   // æ‰§è¡ŒæˆåŠŸä¼šèµ°åˆ°è¿™é‡Œ   
   print ( "success" ); 
}). catchError (( e ){ 
   // æ‰§è¡Œå¤±è´¥ä¼šèµ°åˆ°è¿™é‡Œ   
   print ( e ); 
}); 

```

* åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨å¼‚æ­¥ä»»åŠ¡ä¸­æŠ›å‡ºäº†ä¸€ä¸ªå¼‚å¸¸ï¼Œ then çš„å›è°ƒå‡½æ•°å°†ä¸ä¼šè¢«æ‰§è¡Œï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ Â  catchError å›è°ƒå‡½æ•°å°†è¢«è°ƒç”¨ï¼›ä½†æ˜¯ï¼Œå¹¶ä¸æ˜¯åªæœ‰ Â  catchError å›è°ƒæ‰èƒ½æ•è·é”™è¯¯ï¼Œ then æ–¹æ³•è¿˜æœ‰ä¸€ä¸ªå¯é€‰å‚æ•° onError ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å®ƒæ¥æ•è·å¼‚å¸¸ï¼š 

```

Future . delayed ( new Duration ( seconds : 2 ), () { 
    //return "hi world!"; 
    throw AssertionError ( "Error" ); 
}). then (( data ) { 
    print ( "success" ); 
}, onError : ( e ) { 
    print ( e ); 
}); 

```

**  Future.whenComplete**  

* æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°æ— è®ºå¼‚æ­¥ä»»åŠ¡æ‰§è¡ŒæˆåŠŸæˆ–å¤±è´¥éƒ½éœ€è¦åšä¸€äº›äº‹çš„åœºæ™¯ï¼Œæ¯”å¦‚åœ¨ç½‘ç»œè¯·æ±‚å‰å¼¹å‡ºåŠ è½½å¯¹è¯æ¡†ï¼Œåœ¨è¯·æ±‚ç»“æŸåå…³é—­å¯¹è¯æ¡†ã€‚è¿™ç§åœºæ™¯ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼Œç¬¬ä¸€ç§æ˜¯åˆ†åˆ«åœ¨ then æˆ– catch ä¸­å…³é—­ä¸€ä¸‹å¯¹è¯æ¡†ï¼Œç¬¬äºŒç§å°±æ˜¯ä½¿ç”¨ Future çš„ whenComplete å›è°ƒï¼Œæˆ‘ä»¬å°†ä¸Šé¢ç¤ºä¾‹æ”¹ä¸€ä¸‹ï¼š 

```

Future . delayed ( new Duration ( seconds : 2 ),(){ 
   //return "hi world!"; 
   throw AssertionError ( "Error" ); 
}). then (( data ){ 
   // æ‰§è¡ŒæˆåŠŸä¼šèµ°åˆ°è¿™é‡Œ   
   print ( data ); 
}). catchError (( e ){ 
   // æ‰§è¡Œå¤±è´¥ä¼šèµ°åˆ°è¿™é‡Œ     
   print ( e ); 
}). whenComplete ((){ 
   // æ— è®ºæˆåŠŸæˆ–å¤±è´¥éƒ½ä¼šèµ°åˆ°è¿™é‡Œ 
}); 

```

#### Future.wait

* æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ç­‰å¾…å¤šä¸ªå¼‚æ­¥ä»»åŠ¡éƒ½æ‰§è¡Œç»“æŸåæ‰è¿›è¡Œä¸€äº›æ“ä½œï¼Œæ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªç•Œé¢ï¼Œéœ€è¦å…ˆåˆ†åˆ«ä»ä¸¤ä¸ªç½‘ç»œæ¥å£è·å–æ•°æ®ï¼Œè·å–æˆåŠŸåï¼Œæˆ‘ä»¬éœ€è¦å°†ä¸¤ä¸ªæ¥å£æ•°æ®è¿›è¡Œç‰¹å®šçš„å¤„ç†åå†æ˜¾ç¤ºåˆ° UI ç•Œé¢ä¸Šï¼Œåº”è¯¥æ€ä¹ˆåšï¼Ÿç­”æ¡ˆæ˜¯ Future.wait ï¼Œå®ƒæ¥å—ä¸€ä¸ª Future æ•°ç»„å‚æ•°ï¼Œåªæœ‰æ•°ç»„ä¸­æ‰€æœ‰ Future éƒ½æ‰§è¡ŒæˆåŠŸåï¼Œæ‰ä¼šè§¦å‘ then çš„æˆåŠŸå›è°ƒï¼Œåªè¦æœ‰ä¸€ä¸ª Future æ‰§è¡Œå¤±è´¥ï¼Œå°±ä¼šè§¦å‘é”™è¯¯å›è°ƒã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬é€šè¿‡æ¨¡æ‹Ÿ Future.delayed Â  æ¥æ¨¡æ‹Ÿä¸¤ä¸ªæ•°æ®è·å–çš„å¼‚æ­¥ä»»åŠ¡ï¼Œç­‰ä¸¤ä¸ªå¼‚æ­¥ä»»åŠ¡éƒ½æ‰§è¡ŒæˆåŠŸæ—¶ï¼Œå°†ä¸¤ä¸ªå¼‚æ­¥ä»»åŠ¡çš„ç»“æœæ‹¼æ¥æ‰“å°å‡ºæ¥ï¼Œä»£ç å¦‚ä¸‹ï¼š 

```

Future . wait ([ 
  // 2 ç§’åè¿”å›ç»“æœ   
  Future . delayed ( new Duration ( seconds : 2 ), () { 
    return "hello" ; 
  }), 
  // 4 ç§’åè¿”å›ç»“æœ   
  Future . delayed ( new Duration ( seconds : 4 ), () { 
    return " world" ; 
  }) 
]). then (( results ){ 
  print ( results [ 0 ] + results [ 1 ]); 
}). catchError (( e ){ 
  print ( e ); 
}); 

```

* æ‰§è¡Œä¸Šé¢ä»£ç ï¼Œ 4 ç§’åä½ ä¼šåœ¨æ§åˆ¶å°ä¸­çœ‹åˆ° â€œhello worldâ€ ã€‚ 

